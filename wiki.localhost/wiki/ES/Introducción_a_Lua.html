<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>ES/Introducción a Lua - Multi Theft Auto: Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"ES/Introducción_a_Lua","wgTitle":"ES/Introducción a Lua","wgCurRevisionId":39269,"wgRevisionId":39269,"wgArticleId":5518,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"ES/Introducción_a_Lua","wgRelevantArticleId":5518,"wgRequestId":"bde6b3d1ac01aca9023e1057","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":false,"dialogs":false,"preview":false,"publish":false}});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook"/>
<script async="" src="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.5"/>
<link rel="shortcut icon" href="http://wiki.localhost/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.localhost/opensearch_desc.php" title="Multi Theft Auto: Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.multitheftauto.com/api.php?action=rsd"/>
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html"/>
<link rel="alternate" type="application/atom+xml" title="Multi Theft Auto: Wiki Atom feed" href="http://wiki.localhost/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-ES_Introducción_a_Lua rootpage-ES_Introducción_a_Lua skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">ES/Introducción a Lua</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Multi Theft Auto: Wiki</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Los llamados "resources" son fundamentales en MTA. Básicamente consisten en una carpeta o archivo ZIP que contiene una colección archivos, además de un archivo <b>meta.xml</b> que define qué archivos pertenecen al resource, algunas configuraciones, y otras cosas. Como los programas en un sistema operativo, los resources pueden ser iniciados, detenidos, y reiniciados, y varios pueden funcionar al mismo tiempo.
</p><p>Todo lo que es la programación ocurre dentro de los resources. Lo que éste haga define si se trata de un modo de juego, un mapa, un script sencillo, u otra cosa. MTA, por defecto, trae ciertos resources que puedes usar opcionalmente en tus modos de juego.
</p><p><b>Lo primero que debes tener en cuenta al iniciarte en la programacion en LUA, es conseguir un editor que funcione para ello. Esto hace mucho más facil tu trabajo, permitiéndote corregir el sintaxis de las matemáticas, por ejemplo. El equipo de MTA recomienda <a rel="nofollow" class="external text" href="http://notepad-plus.sourceforge.net/uk/site.htm">Notepad++</a> y <a rel="nofollow" class="external text" href="http://luaedit.sourceforge.net/">LuaEdit</a>.</b>
</p><p><b>También en cuanto a Tutoriales, puedes guiarte de estos: <a rel="nofollow" class="external text" href="http://forum.mtasa.com/viewtopic.php?f=145&amp;t=70852">Scripteando Cosas Básicas</a> .</b>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Creando_un_script_funcional"><span class="tocnumber">1</span> <span class="toctext">Creando un script funcional</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Estructura_de_un_script_y_ubicaci.C3.B3n_del_mismo"><span class="tocnumber">1.1</span> <span class="toctext">Estructura de un script y ubicación del mismo</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Identificando_tu_resource"><span class="tocnumber">1.2</span> <span class="toctext">Identificando tu resource</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Creando_un_script_simple"><span class="tocnumber">1.3</span> <span class="toctext">Creando un script simple</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Corriendo_el_script"><span class="tocnumber">1.4</span> <span class="toctext">Corriendo el script</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Creando_un_Comando"><span class="tocnumber">2</span> <span class="toctext">Creando un Comando</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Acerca_de_los_manejadores_de_comandos"><span class="tocnumber">2.1</span> <span class="toctext">Acerca de los manejadores de comandos</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Escribiendo_la_funci.C3.B3n"><span class="tocnumber">2.2</span> <span class="toctext">Escribiendo la función</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Lo_que_necesitas_saber"><span class="tocnumber">3</span> <span class="toctext">Lo que necesitas saber</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Scripts_de_cliente_y_servidor"><span class="tocnumber">3.1</span> <span class="toctext">Scripts de cliente y servidor</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Resources_m.C3.A1s_complejos"><span class="tocnumber">3.2</span> <span class="toctext">Resources más complejos</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Primer_Ejemplo_-_Un_script_util"><span class="tocnumber">3.2.1</span> <span class="toctext">Primer Ejemplo - Un script util</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Segundo_Ejemplo_-_Un_modo_de_Juego"><span class="tocnumber">3.2.2</span> <span class="toctext">Segundo Ejemplo - Un modo de Juego</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Tercer_ejemplo_-_Un_mapa"><span class="tocnumber">3.2.3</span> <span class="toctext">Tercer ejemplo - Un mapa</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Eventos"><span class="tocnumber">3.3</span> <span class="toctext">Eventos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#.C2.BFY_ahora_qu.C3.A9.3F"><span class="tocnumber">4</span> <span class="toctext">¿Y ahora qué?</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Traductores"><span class="tocnumber">5</span> <span class="toctext">Traductores</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Creando_un_script_funcional">Creando un script funcional</span></h2>
<p>Primero, aprenderemos a hacer un script que permita al jugador caminar libremente por la ciudad. Esto lo explicaremos paso a paso.
</p>
<h3><span class="mw-headline" id="Estructura_de_un_script_y_ubicaci.C3.B3n_del_mismo">Estructura de un script y ubicación del mismo</span></h3>
<p>Dirijámonos a la carpeta raíz de tu servidor para MTA (por defecto es <i>C:\Archivos de Programa\Multi Theft Auto\server</i>). Después vamos a la siguiente ubicación:
</p><p>	\server\mods\deathmatch\resources\
</p><p>Verás muchos archivos ZIP. Como mencioné antes, estos ZIP son los resources, que vienen por defecto con MTA. Para crear tu propio resource, añade una carpeta a esta ubicación, y dale un nombre. Recomiendo que, al ser tu primer script, sigas las instrucciones al pie de la letra, y a esta carpeta la llames "myserver".
</p><p>Ahora, entremos a la ubicación: 
</p><p>	\resources\myserver\
</p>
<h3><span class="mw-headline" id="Identificando_tu_resource">Identificando tu resource</span></h3>
<p>Como mencioné antes, todo resource tiene un archivo que define el tipo, los archivos, y las configuraciones del resource, es el <i>meta.xml</i>. Siempre debe estar dentro de cada resource, de otra forma éste no funciona. Así que creemos un archivo de texto, y llamémoslo "meta.xml" (sin las comillas). Luego abrámoslo con el Bloc de Notas, o con Microsoft Wordpad.
</p><p>Una vez dentro de este archivo, agregaremos el siguiente código:
</p><p><br />
</p>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
     &lt;info author="TuNombre" type="gamemode" name="Mi Servidor" description="Mi primer servidor de MTA DM" /&gt;
     &lt;script src="script.lua" /&gt;
&lt;/meta&gt;
</pre>
<p><br />
En la etiqueta <i>&lt;info /&gt;</i> hay un campo "type". Éste indica el tipo de resource, que siendo "gamemode" en este caso, define que es un modo de juego. Nótese que cuando es otro tipo de resource, el valor "type" cambia. Pero eso lo veremos luego. Por ahora, un modo de juego es lo que necesitas para comenzar un servidor.
</p><p>La etiqueta <i>&lt;script /&gt;</i> indica el script que tendrá nuestro modo de juego. A continuación, cómo crearlo.
</p>
<h3><span class="mw-headline" id="Creando_un_script_simple">Creando un script simple</span></h3>
<p>Nótese que en la etiqueta <i>&lt;script /&gt;</i>, el archivo Lua no está en otro directorio, como por ejemplo <i>myserver\script.lua</i>. Esto es porque el archivo LUA del que hablamos será creado en el mismo lugar en el que el archivo <i>meta.xml</i>. Bueno, ahora creamos en "myserver", otro archivo de texto, y lo llamamos "script.lua". Abrámoslo y agreguemos estas líneas:
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
function manejadorDeInicio()
	local x = 1959.55
	local y = -1714.46
	local z = 10
	spawnPlayer(source, x, y, z)
	fadeCamera(source, true)
	setCameraTarget(source, source)
	outputChatBox("Bienvenido a Mi Servidor", source)
end
addEventHandler("onPlayerJoin", getRootElement(), manejadorDeInicio)
</pre>
<p><br />
Este script inicia a tu jugador en las coordenadas "x", "y" y "z" (spawnPlayer) cuando entras al servidor. OJO: ¡La función <i>fadeCamera</i> siempre debe ser usada cuando inicias al jugador, de otra forma, la pantalla quedará en negro!. Lo mismo pasa con la función <i>setCameraTarget</i>; si no la usas, el jugador no podrá verse a sí mismo, si no que mirará al cielo infinito.
</p><p>La variable <b>source</b> indica qué fue lo que ocasionó al evento. Como el evento <i>onPlayerJoin</i> significa <i>alIniciarJugador</i>, lógico que lo que ocasione a este evento sea el jugador. Así, evitaremos iniciar a cualquier jugador.
</p><p>Ahora, dirigiéndonos a <a href="../AddEventHandler.html" title="AddEventHandler">addEventHandler</a>, podrás ver que posee 3 cosas: <i>onPlayerJoin</i> (el nombre del evento), <i>getRootElement()</i> (que indica por qué o quién será iniciado el evento, ya que <i>getRootElement()</i> significa "todo"), y <i>joinHandler</i>, que es el nombre de la función a ejecutar cuando el evento sea activado.
</p><p>Con esto, deberías poder comenzar a jugar. Pero faltan algunos detalles... ¡Sigamos!
</p>
<h3><span class="mw-headline" id="Corriendo_el_script">Corriendo el script</span></h3>
<p>Para que tu servidor local sea iniciado, debes ir a la carpeta raíz de tu servidor (recuerda cuando fuimos a los resources, 2 puestos encima). Una vez que lo inicies, aparecerá una consola con una serie de datos; recuerda el número del puerto, porque lo necesitarás para jugar. Cuando aparezca un mensaje que diga "Server started and is ready to accept connections!", sabrás que ya está listo.
</p><p>Pero antes de jugar, debes iniciar el modo de juego. Escribe "gamemode myserver" en la consola del servidor, y presiona Enter. El servidor emitirá algunos mensajes, e iniciará tu modo de juego, y si algún error surge, nos lo dirá. Bueno, ahora es tiempo de probar el modo de juego. Inicia MTA, y en el menú principal escoge "Quick Connect". Apareceren 3 campos. En el primero, escribe "localhost", en el segundo, el número del puerto de tu servidor, y en el tercero, nada, después de todo es la contraseña,y tú no pusiste ninguna. Si todo funciona bien, deberías poder comenzar a jugar en Los Santos.
</p><p>A continuación, te enseñaremos a crear un comando que permita crear un vehículo a tu lado. Si quieres, puedes saltarte este paso y seguir la programación avanzada con <a href="../Map_manager.html" title="Map manager" class="mw-redirect">Map Manager</a>, que continúa este tutorial. También puedes revisar <a href="../Introduction_to_Scripting_GUI.html" title="Introduction to Scripting GUI" class="mw-redirect"> Introducción a la Programación del GUI</a>, en el que te enseñaremos a diseñar la Interfaz Gráfica de Usuario (GUI en inglés, por <i>Graphical User Interface</i>).
</p>
<h2><span class="mw-headline" id="Creando_un_Comando">Creando un Comando</span></h2>
<p>Volvamos a <i>script.lua</i>. Como dije hace un momento, crearemos un comando que permita crear un vehículo a tu lado. Primero, necesitaremos crear una función a la que llamar, y un manejador de comandos que cree el comando buscado.
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
-- Aquí creamos la función que llama el manejador, con los argumentos "elJugador", "nombreDelComando", "modeloDeVehiculo":
function crearVehículoParaJugador(elJugador, nombreDelComando, modeloDeVehículo)
   -- Crear el vehículo y otros.
end

-- Aquí creamos el manejador de comandos:
addCommandHandler("crearvehiculo", crearVehículoParaJugador)
</pre>
<p><br />
<b>Nota:</b> <i>Los nombres de las funciones tienen enlaces que te llevan a la <b>documentación</b> de ellas.</i>
</p>
<h4><span class="mw-headline" id="Acerca_de_los_manejadores_de_comandos">Acerca de los manejadores de comandos</span></h4>
<p>El primer argumento de <i>addCommandHandler</i> es el nombre del comando que el jugador podrá ingresar, y el segundo es la función que ejecutará en el momento de ingreso del comando (en este caso <i>crearVehiculoParaJugador</i>). 
</p><p>Si tienes alguna experiencia con la programación en C o algún lenguaje parecido, sabrás que las funciones se ejecutan de la forma:
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
nombreDeFunción(argumento1, argumento2, argumento3, ..)
</pre>
<pre class="prettyprint lang-lua">
nombreDeFunción(elJugador, nombreDelComando, argumento3, ..)
</pre>
<p><br />
Fijémonos bien en esto. Vemos que <i>argumento1</i> es <i>elJugador</i> y <i>argumento2</i> es <i>nombreDelComando</i>. <i>elJugador</i> representa al jugador que haya ingresado el comando, por lo que de la forma que lo llames, esta variable será el jugador. <i>nombreDelComando</i> es simplemente el nombre del comando (sin la barra "/"), no hay ningún misterio en ello, por lo que si el jugador escribió "/crearvehiculo" entonces esta variable sería "crearvehiculo". Por último, <i>argumento3</i> representa una variable más, que estudiaremos más adelante. Nunca olvides que los 2 primeros argumentos son obligatorios y están predefinidos (y debes tenerlos en el orden que se indican), pero puedes llamarlos como sea.
</p><p><i>addCommandHandler</i> permite llamar fácilmente a funciones como <i>crearVehículoParaJugador</i>, de forma interna.
</p><p>Por ejemplo: Alguien entra el comando "/crearvehiculo 468". El servidor creará el vehículo 468, es decir, la moto Sánchez. Dentro del código, <i>addCommandHandler</i> llama a la función <i>crearVehículoParaJugador</i> como si hubiera sido escrito así:
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
crearVehículoParaJugador(elJugador,"crearvehiculo","468") -- Recuerda que "elJugador" es el elemento jugador que entró el comando.
</pre>
<p><br />
Como podemos ver, esto prevée ciertos argumentos que ya hemos mencionado. Pero el más importante es "468", que es el "argumento3" del que hablábamos más arriba. Éste se refiere al modelo del vehículo. Recuerda que siempre debes definir los primeros 2 parámetros ("elJugador" y "nombreDelComando"), porque de otra forma el comando no funcionará.
</p><p><b>Nota:</b> <i>Tienes que poner el manejador de comandos DEBAJO de la función a llamar por el comando. ¡El orden de las ejecuciones es fundamental!</i>
</p>
<h4><span class="mw-headline" id="Escribiendo_la_funci.C3.B3n">Escribiendo la función</span></h4>
<p>Para llenar la función que hemos creado, primero hay que plantearse qué se debe hacer:
</p>
<ul><li> Conseguir la posición del jugador, así sabremos dónde crear el vehículo (queremos que aparezca al lado del jugador).</li>
<li> Calcular la posición donde crearemos el vehículo (no queremos que aparezca en el jugador).</li>
<li> Crear el vehículo.</li>
<li> Revisar si fue creado. Si no, mostrar alguna advertencia o algún mensaje de error.</li></ul>
<p>Para conseguir estos objetivos, debemos usar ciertas funciones, las cuales se pueden ver visitando la <a href="../Scripting_Functions.html" title="Scripting Functions" class="mw-redirect"> Lista de Funciones de Servidor</a>. Primero, una función para conseguir la posición del jugador. Si visitaste la <a href="Clases_MTA.html" title="ES/Clases MTA"> Lista de Clases de MTA</a>, sabrás que un jugador es un elemento, lo que nos lleva a buscar una <b>Función de Elemento</b>, la cual es <i><a href="../GetElementPosition.html" title="GetElementPosition">getElementPosition</a></i>. Haciendo click en ella, visitarás la documentación de ella, que contiene una descripción, el sintaxis (los argumentos necesarios en la función), y, generalmente, un ejemplo de cómo usarla.
</p><p>Para la función <a href="../GetElementPosition.html" title="GetElementPosition">getElementPosition</a>, el sintaxis sería:
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
float, float, float getElementPosition ( elemento elElemento )
</pre>
<p><br />
Los 3 <i>float</i> que aparecen, son los valores que regresa la función. Estos valores, en español, se llaman <b>Número de punto flotante</b>, y son números que pueden o no, poseer decimales (véase la <a href="Tipos_de_Valores.html" title="ES/Tipos de Valores"> Lista de tipos de valores</a>). Como "x", "y" y "z" son coordenadas, por defecto siempre serán números de punto flotante. Ahora, fijándonos en los paréntesis, notaremos que sólo aparece "elElemento" como argumento de la función. Pues, aplicando la función a un jugador, tendríamos algo como esto:
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
function crearVehículoParaJugador(elJugador, nombreDelComando, modeloDeVehículo)
	--[[Aquí conseguiremos la posición del jugador, y la almacenaremos en 3 valores: "x", "y" y "z". Nota: "local" significa que las variables indicadas sólo pueden ser usadas en la función actual.]]--
	local x,y,z = getElementPosition(elJugador)
end
</pre>
<p><br />
Ahora, para crear el vehículo al lado del jugador, debemos modificar alguna coordenada, en este caso, "x".
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
function crearVehículoParaJugador(elJugador, nombreDelComando, modeloDeVehículo)
	local x,y,z = getElementPosition(elJugador)
	x = x + 5 --Agregamos 5 a la posición "X" (¡esto no altera la posición del jugador!)
end
</pre>
<p><br />
Nuevamente, necesitamos otra función para crear el vehículo. Buscándola en la <a href="../Scripting_Functions.html" title="Scripting Functions" class="mw-redirect"> Lista de Funciones de Servidor</a>, la encontraremos. Ya que hablamos de vehículo, vamos a la subcategoría tal, en la que encontramos <a href="../CreateVehicle.html" title="CreateVehicle">createVehicle</a>. En esta función, el valor que regresa la función consta de 1 solo argumento (esto es lo más común en las funciones), y es el vehículo creado, o un valor "boolean" ("lógico" en inglés) de tipo "false", si el vehículo no fue creado.
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
function crearVehículoParaJugador(elJugador, nombreDelComando, modeloDeVehículo)
	local x,y,z = getElementPosition(elJugador)
	x = x + 5
	local vehículoCreado = createVehicle(tonumber(modeloDeVehículo),x,y,z)
end
</pre>
<p>Nótese que usamos "tonumber(modeloDeVehículo)" en vez de usar directamente "modeloDeVehículo". Esto es porque cuando entramos un comando, todos los argumentos salen en forma de "string" ("arreglo" en inglés), que es un tipo de valor textual. Por ello, no puede ser usado como número, y la función "tonumber()" nos permite dejarlo como un número.
</p><p>Bueno, tenemos todo lo necesario para que nuestro script funcione, pero eso no indica que esté listo. Ya tenemos la función para conseguir la posición del jugador, modificarla, y crear el vehículo. Pero nos falta el mensaje. La función para esto se llama <i>outputChatBox</i>. Como dije antes, si el vehículo no fue creado, entonces regresa un valor "false". Así que creamos nuestra primera condición, en la que si el valor regresado es falso, entonces aparece un mensaje.
</p><p>Veamos cómo luce el script final:
</p><p><br />
</p>
<pre class="prettyprint lang-lua">
function crearVehículoParaJugador(elJugador, nombreDelComando, modeloDeVehículo)
	local x,y,z = getElementPosition(elJugador)
	x = x + 5
	local vehículoCreado = createVehicle(tonumber(modeloDeVehículo),x,y,z)
	if (vehículoCreado == false) then --"if" es la condición, siempre debe ir acompañado de la condición y un "then".
		outputChatBox("Error al crear vehículo.",elJugador) --Crea un mensaje de error simple en el chat.
	end
end
addCommandHandler("crearvehiculo", crearVehículoParaJugador) --Y aquí creamos el manejador de comandos.
</pre>
<p><br />
Nada mal, ¿no? Ya te hemos introducido en la creación de 2 scripts sencillos. Si quieres más programación avanzada, entonces visita el <a href="http://wiki.localhost/index.php?title=Map_Manager&amp;action=edit&amp;redlink=1" class="new" title="Map Manager (page does not exist)"> Mánager de Mapas</a>.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Lo_que_necesitas_saber">Lo que necesitas saber</span></h2>
<p>Ya has leído un poco sobre resources, manejadores de comandos y funciones de búsqueda en la documentación (en el primer párrafo), pero aún queda mucho por aprender. En esta sección te daremos una vista rápida sobre esto, y si se puede, enlazar a otras páginas útiles.
</p>
<h3><span class="mw-headline" id="Scripts_de_cliente_y_servidor">Scripts de cliente y servidor</span></h3>
<p>Quizás ya has notado los términos Server (o Servidor) y Client (o Cliente) en algún lado, mayormente en conjunción con las funciones. MTA no sólo soporta scripts que funcionan en el servidor y prevén comandos (como el que escribimos arriba) u otras características; también scripts que corren en el cliente (MTA en sí, el software que usas para conectarte a los servidores). Esto se debe a que algunas funciones tienen que estar del lado cliente (como el GUI; Graphical User Interface, Interfaz de Usuario Gráfica), si bien funcionan mejor o porque no se pueden hacer en el servidor.
</p><p>La mayoría de los scripts que harás (modos de juego y/o mapas) probablemente serán de tipo servidor, como el que escribimos en la primera sección. Si tratas de hacer funcionar algo que no se puede hacer en el servidor, probablemente tendrá que ser de cliente. para un script de cliente, por ejemplo, podrías crear un archivo de Lua ordinario (como <i>client.lua</i>) y especificarlo en el archivo meta.xml, así:
</p>
<pre class="prettyprint lang-xml">
&lt;script src="client.lua" type="client" /&gt;
</pre>
<p>El atributo <i>type</i> por defecto es 'server' (servidor), por lo que no es necesario escribirlo cuando se trata de scripts de servidor. Si quieres, puedes leer más sobre <a href="Scripts_de_Cliente.html" title="ES/Scripts de Cliente">scripts de cliente</a>.
</p>
<h3><span class="mw-headline" id="Resources_m.C3.A1s_complejos">Resources más complejos</span></h3>
<p>La seccion previa es de como poner scripts de modo clientside, pero hay cosas mas posibles. Como se menciona al principio de este texto, los resources pueden hacer casi cualquier cosa. Su proposito es definido de porque hacen. Veamos unos resources teoricamente, por ver los archivos que tienen, el<i>meta.xml</i> y que podrian hacer:
</p>
<h4><span class="mw-headline" id="Primer_Ejemplo_-_Un_script_util">Primer Ejemplo - Un script util</span></h4>
<pre class="prettyprint lang-xml">
/admin_commands
	/meta.xml
	/commands.lua
	/client.lua
</pre>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
	&lt;info author="AlexD" description="Comandos de Admin" /&gt;
	&lt;script src="commands.lua" /&gt;
	&lt;script src="client.lua" type="client" /&gt;
&lt;/meta&gt;
</pre>
<ul><li> El <i>commands.lua</i> tiene comandos de administrador, como banear a un jugador, mutearlo o cualquier cosa que pueda usar un administrador</li>
<li> El <i>client.lua</i> tiene el GUI para poder ejecutar los comandos sencillamente.</li></ul>
<p><br />
Este ejemplo estaria corriendo todo el tiempo (talvez auto-empezado cuando el servidor empieza) Y es util durante toda la experiencia en el juego y tambien no interfiere con el Juego en general, al menos que un administrador decide de ejecutar algun acto, por supuesto.
</p>
<h4><span class="mw-headline" id="Segundo_Ejemplo_-_Un_modo_de_Juego">Segundo Ejemplo - Un modo de Juego</span></h4>
<pre class="prettyprint lang-xml">
/counterstrike
	/meta.xml
	/counterstrike.lua
	/buymenu.lua
</pre>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
	&lt;info author="AlexD" description="Recreacion de CounterStrike" type="gamemode" /&gt;
	&lt;script src="counterstrike.lua" /&gt;
	&lt;script src="buymenu.lua" type="client" /&gt;
&lt;/meta&gt;
</pre>
<ul><li> El <i>counterstrike.lua</i> contiene lo similar a las siguientes caracteristicas:
<ul><li> Dejar que los jugadores elijan su equipo y aparezcan en el</li>
<li> Darles armas, objectivos e instrucciones (talvez leer de un Mapa, vease mas adelante)</li>
<li> Definir las reglas del juego, ejemplo: cuando la partida acabe, que pasa cuando un jugador muere</li>
<li> .. y talvez algo mas</li></ul></li>
<li> El <i>buymenu.lua</i> es un script Clientside y crea un menu para comprar armas</li></ul>
<p>Este ejemplo puede ser llamado modo de juego, porque no solo interviene con el juego en general, pero actualmente define las reglas de el. El atributo <i>type</i> indica que este ejemplo sirve con el  <a href="../Map_manager.html" title="Map manager" class="mw-redirect">Map manager</a>, si otro resource que fue escrito por el Equipo QA para gestionar modos de juego y carga de mapas. Es altamente recomendado que tu base tus modos de juego en las tecnicas que proporciona.
</p><p>Esto tambien significa que el modo de juego no cargara sin el mapa. Los modos de juego tienen que ser tan genericos posibles. Un ejemplo de un mapa  es mostrado en el siguiente ejemplo.
</p>
<h4><span class="mw-headline" id="Tercer_ejemplo_-_Un_mapa">Tercer ejemplo - Un mapa</span></h4>
<pre class="prettyprint lang-xml">
/cs-airport
	/meta.xml
	/airport.map
	/airport.lua
</pre>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
	&lt;info author="Someguy" description="Counterstrike airport map" type="map" gamemodes="counterstrike" /&gt;
	&lt;map src="airport.map" /&gt;
	&lt;script src="airport.lua" /&gt;
&lt;/meta&gt;
</pre>
<ul><li> El <i>airport.map</i> es un archivo XML que proporciona información sobre el mapa para el modo de juego, estos pueden incluir:
<ul><li> Donde deben spawnear los jugadores, con que armas, que equipos hay</li>
<li> Cuales son los objetivos</li>
<li> Clima, tiempo, tiempo limite</li>
<li> Proporcionar vehículos</li></ul></li>
<li> El <i>airport.lua</i> puede contener funciones del mapa específicas, que pueden incluir:
<ul><li> Apertura de alguna puerta / hacer que algo explote cuando suceda algo específico</li>
<li> Crear o mover algunos objetos personalizados, o manipular los objetos que se crean a través del archivo de mapa.</li>
<li> .. cualquier cosa mapa-específicas que se pueda imaginar</li></ul></li></ul>
<p>Como puede ver, el atributo <i>type</i> cambió a 'map', diciéndole al <a href="../Map_manager.html" title="Map manager" class="mw-redirect">Map manager</a>  que este recurso es un mapa, mientras que el atributo <i>gamemodes</i> indica para que tipos de juego o gamemode este mapa es válido, en este caso el modo de juego en el ejemplo anterior. Lo que puede venir como una sorpresa es que también hay script en el recurso de mapa. Por supuesto, esto no es necesario en un mapa, pero abre un amplio abanico de posibilidades para los creadores de mapas para crear su propio mundo dentro de las reglas del modo de juego que para el que crean.
</p><p>El archivo <i>airport.map</i> debe tener un aspecto similar a este:
</p>
<pre class="prettyprint lang-xml">
&lt;map mode="deathmatch" version="1.0"&gt;
	&lt;terrorists&gt;
		&lt;spawnpoint posX="2332.23" posY="-12232.33" posZ="4.42223" skins="23-40" /&gt;
	&lt;/terrorists&gt;
	&lt;counterterrorists&gt;
		&lt;spawnpoint posX="2334.23443" posY="-12300.233" posZ="10.2344" skins="40-50" /&gt;
	&lt;/counterterrorists&gt;

	&lt;bomb posX="23342.23" posY="" posZ="" /&gt;
	
	&lt;vehicle posX="" posY="" posZ="" model="602" /&gt;	
	&lt;vehicle posX="" posY="" posZ="" model="603" /&gt;	
&lt;/map&gt;
</pre>
<p>Cuando se inicia un modo de juego con un mapa, los resources del mapa se inicia automáticamente por el mapmanager y la información que contiene puede ser leída por el recursos del modo de juego. Cuando el mapa cambia, el recurso de mapa actual se detiene y se inicia el siguiente recurso de mapa. Para una explicación más detallada y ejemplos de cómo se utilizan los recursos del mapa en el main script, por favor visite la pagina <a href="../Writing_Gamemodes.html" title="Writing Gamemodes">Writing Gamemodes</a>.
</p>
<h3><span class="mw-headline" id="Eventos">Eventos</span></h3>
<p>Los eventos son la manera en la cual MTA le informa a los scripts cuando las cosas estan ocurriendo. Por ejemplo cuando un jugador muere, el evento <a href="../OnPlayerWasted.html" title="OnPlayerWasted">onPlayerWasted</a> es llamado. De manera de realizar cualquier accion cuando un jugador muere, tienes que prepararlo tu mismo, de manera similar a como cuando añades un command handler en<a href="#Writing_the_script">el primer capitulo</a>.
</p><p>Este ejemplo mostrara un mensaje con el nombre del jugador que murió.
</p>
<pre class="prettyprint lang-lua">
function playerDied(totalAmmo, killer, killerWeapon, bodypart)
	outputChatBox(getPlayerName(source).." died!")
end
addEventHandler("onPlayerWasted",getRootElement(),playerDied)
</pre>
<p>Instead of showing what arguments are needed, the documentation page for Events shows what parameters are passed to the handler function, similiar to the way a <a href="#About_command_handlers">command handler</a> does, just that it is different from event to event. Another important point is the <i>source</i> variable, that exists in handler functions. It doesn't have to be added to the parameter list of the function, but it still exists. It has a different value from event to event, for player events (as in the example above) it is the player element. As another example, you can take a look at the basic spawning player script in the first section to get an idea how <i>source</i> is used.
</p>
<h2><span class="mw-headline" id=".C2.BFY_ahora_qu.C3.A9.3F">¿Y ahora qué?</span></h2>
<p>Deberías ya estar familiarizado con los aspectos básicos de los scripts de MTA, así como con la documentación. La <a href="Pagina_Principal.html" title="ES/Pagina Principal" class="mw-redirect">Página Principal</a> te provee de enlaces con mayor información, así como tutoriales y Referencias que permiten una vista más profunda a los temas que te interesan.
</p><p>Recomendamos que leas el tutorial de <a href="../Debugging.html" title="Debugging">debug</a> (encuentro de errores). Es necesaria una buena habilidad con el "debug" cuando haces scripts. ¡Suerte en MTA!
</p>
<h2><span class="mw-headline" id="Traductores">Traductores</span></h2>
<ul><li>Benxamix2/The Kid</li></ul>
<ul><li>AlexD</li></ul>
<ul><li>Rockero</li></ul>

<!-- 
NewPP limit report
Cached time: 20190629062506
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.014 seconds
Real time usage: 0.016 seconds
Preprocessor visited node count: 247/1000000
Preprocessor generated node count: 472/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key mta_wiki-wiki_dev_:pcache:idhash:5518-0!*!0!!en!*!* and timestamp 20190629062506 and revision id 39269
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.multitheftauto.com/index.php?title=ES/Introducci%c3%b3n_a_Lua&amp;oldid=39269">https://wiki.multitheftauto.com/index.php?title=ES/Introducción_a_Lua&amp;oldid=39269</a>"</div>
					<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="Introducci%c3%b3n_a_Lua.html" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://wiki.localhost/index.php?title=Talk:ES/Introducci%C3%B3n_a_Lua&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="http://wiki.localhost/index.php?title=ES/Introducci%C3%B3n_a_Lua&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://wiki.localhost/index.php?title=ES/Introducci%C3%B3n_a_Lua&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://wiki.localhost/index.php?title=Special:CreateAccount&amp;returnto=ES%2FIntroducci%C3%B3n+a+Lua" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://wiki.localhost/index.php?title=Special:UserLogin&amp;returnto=ES%2FIntroducci%C3%B3n+a+Lua" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../Main_Page.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Home"><a href="../Main_Page.html">Home</a></li>
											<li id="n-How-you-can-help"><a href="../How_you_can_help.html">How you can help</a></li>
											<li id="n-recentchanges"><a href="../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.multitheftauto.com/wiki/OnDgsDestroy" title="Load a random page [x]" accesskey="x">Random page</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-reference" role="navigation">
		<h3>reference</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Client-Functions"><a href="../Client_Scripting_Functions.html">Client Functions</a></li>
											<li id="n-Client-Events"><a href="../Client_Scripting_Events.html">Client Events</a></li>
											<li id="n-Server-Functions"><a href="../Server_Scripting_Functions.html">Server Functions</a></li>
											<li id="n-Server-Events"><a href="../Server_Scripting_Events.html">Server Events</a></li>
											<li id="n-Shared-Functions"><a href="../Shared_Scripting_Functions.html">Shared Functions</a></li>
											<li id="n-Useful-Functions"><a href="../Useful_Functions.html">Useful Functions</a></li>
											<li id="n-MTA-Classes"><a href="../MTA_Classes.html">MTA Classes</a></li>
											<li id="n-MTA-Elements"><a href="../Element.html">MTA Elements</a></li>
											<li id="n-Element-Tree"><a href="../Element_tree.html">Element Tree</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.localhost/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Multi Theft Auto: Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="../Special_WhatLinksHere/ES/Introducci%c3%b3n_a_Lua.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="../Special_RecentChangesLinked/ES/Introducci%c3%b3n_a_Lua.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="http://wiki.localhost/index.php?title=ES/Introducci%C3%B3n_a_Lua&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="http://wiki.localhost/index.php?title=ES/Introducci%C3%B3n_a_Lua&amp;oldid=39269" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="http://wiki.localhost/index.php?title=ES/Introducci%C3%B3n_a_Lua&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
				<div id="p-lang" class="portlet" role="navigation">
				<h3>In other languages</h3>

				<div class="pBody">
					<ul>
													<li class="interlanguage-link interwiki-en"><a href="http://wiki.multitheftauto.com/index.php?title=Scripting_Introduction" title="Scripting Introduction – English" lang="en" hreflang="en">English</a></li>
													<li class="interlanguage-link interwiki-it"><a href="http://wiki.multitheftauto.com/index.php?title=IT/Introduzione_allo_scripting" title="Introduzione allo scripting – italiano" lang="it" hreflang="it">Italiano</a></li>
													<li class="interlanguage-link interwiki-nl"><a href="http://wiki.multitheftauto.com/index.php?title=NL/Scripting_introductie" title="Scripting introductie – Nederlands" lang="nl" hreflang="nl">Nederlands</a></li>
													<li class="interlanguage-link interwiki-pt-br"><a href="http://wiki.multitheftauto.com/index.php?title=PT-BR/Introdu%C3%A7%C3%A3o_ao_Scripting" title="Introdução ao Scripting – português do Brasil" lang="pt-BR" hreflang="pt-BR">Português do Brasil</a></li>
													<li class="interlanguage-link interwiki-ru"><a href="http://wiki.multitheftauto.com/index.php?title=RU/Scripting_Introduction" title="Scripting Introduction – русский" lang="ru" hreflang="ru">Русский</a></li>
											</ul>

									</div>
			</div>
				</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="http://www.gnu.org/copyleft/fdl.html"><img src="../../resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31"/></a>
							</div>
					<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="../../resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 7 April 2014, at 19:45.</li>
									<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
									<li id="privacy"><a href="../Multi_Theft_Auto__Wiki_Privacy_policy.html" title="Multi Theft Auto: Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Multi_Theft_Auto__Wiki_About.html" title="Multi Theft Auto: Wiki:About">About Multi Theft Auto: Wiki</a></li>
									<li id="disclaimer"><a href="../Multi_Theft_Auto__Wiki_General_disclaimer.html" title="Multi Theft Auto: Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.GoogleCodePrettify"]);});</script>
<script src="../../extensions/_MTAThemeExtensions/main11b9.js?303"></script><script src="../../extensions/_MTAThemeExtensions/topmenu11b9.js?303"></script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":420});});</script></body></html>
