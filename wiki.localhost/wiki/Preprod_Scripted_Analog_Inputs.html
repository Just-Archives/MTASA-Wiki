<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Preprod:Scripted Analog Inputs - Multi Theft Auto: Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Preprod:Scripted_Analog_Inputs","wgTitle":"Preprod:Scripted Analog Inputs","wgCurRevisionId":49075,"wgRevisionId":49075,"wgArticleId":4299,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Preprod:Scripted_Analog_Inputs","wgRelevantArticleId":4299,"wgRequestId":"7804e342cf43774189d0907f","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","mediawiki.skinning.content.externallinks":"ready","skins.monobook.styles":"ready"});mw.loader.implement("user.tokens@18hksfp",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","ext.GoogleCodePrettify"]);});</script>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<script async="" src="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/resources/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/resources/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook"/>
<meta name="generator" content="MediaWiki 1.31.3"/>
<link rel="shortcut icon" href="http://wiki.localhost/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.localhost/opensearch_desc.php" title="Multi Theft Auto: Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.multitheftauto.com/api.php?action=rsd"/>
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html"/>
<link rel="alternate" type="application/atom+xml" title="Multi Theft Auto: Wiki Atom feed" href="http://wiki.localhost/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=MonoBook&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Preprod_Scripted_Analog_Inputs rootpage-Preprod_Scripted_Analog_Inputs skin-monobook action-view"><div id="globalWrapper"><div id="column-content"><div id="content" class="mw-body" role="main"><a id="top"></a><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Preprod:Scripted Analog Inputs</h1><div id="bodyContent" class="mw-body-content"><div id="siteSub">From Multi Theft Auto: Wiki</div><div id="contentSub" lang="en" dir="ltr"></div><div id="jump-to-nav" class="mw-jump">Jump to:<a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div><!-- start content --><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Proposed_names"><span class="tocnumber">1</span> <span class="toctext">Proposed names</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Controls"><span class="tocnumber">1.1</span> <span class="toctext">Controls</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Other_input"><span class="tocnumber">1.2</span> <span class="toctext">Other input</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#get.2FsetAnalogInputState"><span class="tocnumber">2</span> <span class="toctext">get/setAnalogInputState</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#bindKey"><span class="tocnumber">3</span> <span class="toctext">bindKey</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#toggleControl"><span class="tocnumber">4</span> <span class="toctext">toggleControl</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Serverside_scripting"><span class="tocnumber">5</span> <span class="toctext">Serverside scripting</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Flaws"><span class="tocnumber">6</span> <span class="toctext">Flaws</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Naming_.26_Purpose"><span class="tocnumber">6.1</span> <span class="toctext">Naming &amp; Purpose</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Mouse_input"><span class="tocnumber">6.2</span> <span class="toctext">Mouse input</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Conclusion"><span class="tocnumber">7</span> <span class="toctext">Conclusion</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Proposed_names">Proposed names</span></h1>
<p>All functions used in the binds system use either <b>control names</b> or <b>key names</b>.  Here are proposed names for the new analog variants:
</p>
<h3><span class="mw-headline" id="Controls">Controls</span></h3>
<p>Since analog controls are shared both on foot and in vehicle, two different sets are not required.
</p>
<ul><li><b>move_x</b>: This represents moving your left analog stick left/right.  Return values are -1 &lt;= n &lt;= 1.</li>
<li><b>move_y</b>: This represents moving your left analog stick up/down. Return values are -1 &lt;= n &lt;= 1.</li>
<li><b>look_x</b>: This represents moving your right analog stick left/right.  Return values are -1 &lt;= n &lt;= 1.</li>
<li><b>look_y</b>: This represents moving your right analog stick up/down. Return values are -1 &lt;= n &lt;= 1.</li>
<li><b>accelerate</b>: A special analog accelerate that is sensitive.  Return values are 0 &lt;= n &lt;= 1.  Accelerate only acts upon a single direction</li>
<li><b>brake_reverse</b>: A special analog brake/reverse that is sensitive.  Return values are 0 &lt;= n &lt;= 1.  Brake only acts upon a single direction</li></ul>
<h3><span class="mw-headline" id="Other_input">Other input</span></h3>
<p>These arent "keys" as such anymore, so i'm labelling them "Other" here.  These cannot be <i>set</i> at any point, only binded to or get'd.  These are ripped from ccw's current definitions, and i cant confirm return values.  I'm guessing what they represent based upon my own controller
</p>
<ul><li><b>axis_x</b>: This mostly represents left analog stick left/right.</li>
<li><b>axis_y</b>: This mostly represents left analog stick up/down.</li>
<li><b>axis_z</b>: This mostly represents right analog stick up/down.</li>
<li><b>axis_rz</b>: This mostly represents right analog stick left/right.</li>
<li><b>axis_ry</b>:</li>
<li><b>axis_ry</b>:</li>
<li><b>axis_rz</b>:</li>
<li><b>sld</b>: A trigger button.</li></ul>
<h1><span id="get/setAnalogInputState"></span><span class="mw-headline" id="get.2FsetAnalogInputState">get/setAnalogInputState</span></h1>
<p>This is the first, and perhaps the most straightforward set of functions to be implemented.  These are similar to get/setControlState, with a few key differences:
</p>
<ul><li>1) Clearly it gets/sets the states of <b>analog</b> inputs.  This means returning and setting accurate floats instead of bools, with a range of -1 and 1, where negative is backwards across an axis and positive is forwards</li>
<li>2) Similar to bindKey, this function will be used for both "Keys" and "Controls".  This means that unlike getControlState, it will work for both types of input.</li></ul>
<p>Right now MTA's internal get/setControlState use analog inputs, and force them to a value of 255.  Hopefully this means that implementing these is a matter of adding custom input levels.
</p>
<h1><span class="mw-headline" id="bindKey">bindKey</span></h1>
<p>bindKey is based upon binding to "up" and "down" states.  Therefore it is illogical to bind to a float "0.141516516" state.  Instead, based upon configured deadzones, an artifical "up" and "down" state will be replicated:
</p>
<ul><li><b>down</b>:  No input is being recieved from this input.</li>
<li><b>up</b>:  An input of <i>any</i> value is being recieved from the controller.</li></ul>
<p>This will allow scripters to use these as 'events' to add their own onClientRender event handlers to handle the specific level of sensitivity.
</p>
<h1><span class="mw-headline" id="toggleControl">toggleControl</span></h1>
<p>This would not be very complex but quite simple - it would function exactly as it does now with added functionality to toggle off analog controls.
</p>
<h1><span class="mw-headline" id="Serverside_scripting">Serverside scripting</span></h1>
<p>Depending on the amount of data that is actually synced, (i believe control states are synced), serverside functions can be replicated.  I believe all analog controls are synced.  Clearly, like KeyStates, you will not be able to retrieve "Other" inputs serverside.
</p>
<h1><span class="mw-headline" id="Flaws">Flaws</span></h1>
<h2><span id="Naming_&amp;_Purpose"></span><span class="mw-headline" id="Naming_.26_Purpose">Naming &amp; Purpose</span></h2>
<p>"set/getAnalogInputState" seems an excuse to merge two different sets of input together.  There are various flaws, even if we just think of documentation:
</p>
<ul><li>"Other"'s can't be used for setAnalogInputState.</li>
<li>"Other"'s can't be used for serverside bindKey.</li>
<li>Renaming to <i>*AnalogControlState</i> may seem sensible, but it raises the question of what we name the other set of inputs.  This was easy for getControlState - they were Keys so it could become getKeyState.</li></ul>
<h2><span class="mw-headline" id="Mouse_input">Mouse input</span></h2>
<p>This raises a big question of something that is missing from MTA.  Technically, Mouse Input is an analog input - it is a "detailed" input method that cannot be accounted for with our current functions, but would make sense using the new analog inputs proposal.   Implementing this has many advantages, for example fixing Mantis #3040 and #3966.  Another example is the fact that mouse aim cannot be replicated by script.  However, there are various issues which (most likely) make this difficult:
</p>
<ul><li>Mouse input doesnt appear to be implemented into MTA at all.  Although we have events like onClientCursorMove, we dont have any functions that interface with GTA directly.  In other words, there doesnt appear to be any code for MTA to allow <i>setting</i> the aim, for it to be part of keybinds in the first place.  The whole mouse aim seems to be GTA's own mouse aim, left untouched and detached from the binds system</li>
<li>It is unlike any other input: The keybinds system is nice in the way that all controls are implemented using the same system.  In the case of the mouse, it would (afaik) require a completely renewed system specifically for mouse input.  This input would be moulded into the Scripted Analog Input system, rather than already being part of it.</li></ul>
<p>However, it can be argued that since we have Mouse input functions already, this is not a big deal.  In answer to that, i would give this example:  
</p>
<pre class="prettyprint lang-lua">You've just written paralysis script.  The driver cannot turn while driving but can only accelerate (As seen in the mini gamemode 'Chicken').  A player then goes to settings, turns on "Steer with mouse", and is now able to get around any  control toggling that may have been done.   In order to detect this, some dodgy mouse input detection would be required alongside something like setElementRotation and setElementVelocity to account for it.  Clearly this is not ideal.</pre>
<p><br />
</p>
<h1><span class="mw-headline" id="Conclusion">Conclusion</span></h1>
<p>Analog input is something that needs to happen in order to provide proper functionality for gamemodes.  Current gamemodes may suffer is no interface is provided.  It also needs to be designed properly so that we dont have to worry about it come 1.01+
</p><p><b>All this has been written according to my knowledge of MTA, and feel free to correct me wherever appropriate</b>
</p>
<!-- 
NewPP limit report
Cached time: 20191016151420
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.009 seconds
Real time usage: 0.009 seconds
Preprocessor visited node count: 51/1000000
Preprocessor generated node count: 68/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 512/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key mta_wiki-wiki_dev_:pcache:idhash:4299-0!canonical and timestamp 20191016151420 and revision id 49075
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.multitheftauto.com/index.php?title=Preprod:Scripted_Analog_Inputs&amp;oldid=49075">https://wiki.multitheftauto.com/index.php?title=Preprod:Scripted_Analog_Inputs&amp;oldid=49075</a>"</div>
<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div><!-- end content --><div class="visualClear"></div></div></div></div><div id="column-one" lang="en" dir="ltr"><h2>Navigation menu</h2><div role="navigation" class="portlet" id="p-cactions" aria-labelledby="p-cactions-label"><h3 id="p-cactions-label" lang="en" dir="ltr">Views</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="ca-nstab-main" class="selected"><a href="Preprod_Scripted_Analog_Inputs.html" title="View the content page [c]" accesskey="c">Page</a></li><li id="ca-talk"><a href="Talk_Preprod_Scripted_Analog_Inputs.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li><li id="ca-viewsource"><a href="http://wiki.localhost/index.php?title=Preprod:Scripted_Analog_Inputs&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="http://wiki.localhost/index.php?title=Preprod:Scripted_Analog_Inputs&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li></ul></div></div><div role="navigation" class="portlet" id="p-personal" aria-labelledby="p-personal-label"><h3 id="p-personal-label" lang="en" dir="ltr">Personal tools</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="pt-createaccount"><a href="http://wiki.localhost/index.php?title=Special:CreateAccount&amp;returnto=Preprod%3AScripted+Analog+Inputs" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="http://wiki.localhost/index.php?title=Special:UserLogin&amp;returnto=Preprod%3AScripted+Analog+Inputs" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li></ul></div></div><div class="portlet" id="p-logo" role="banner"><a href="Main_Page.html" class="mw-wiki-logo" title="Visit the main page"></a></div><div role="navigation" class="portlet generated-sidebar" id="p-navigation" aria-labelledby="p-navigation-label"><h3 id="p-navigation-label" lang="en" dir="ltr">Navigation</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Home"><a href="Main_Page.html">Home</a></li><li id="n-How-you-can-help"><a href="How_you_can_help.html">How you can help</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="https://wiki.multitheftauto.com/wiki/JavaSDK" title="Load a random page [x]" accesskey="x">Random page</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-reference" aria-labelledby="p-reference-label"><h3 id="p-reference-label" lang="en" dir="ltr">reference</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Client-Functions"><a href="Client_Scripting_Functions.html">Client Functions</a></li><li id="n-Client-Events"><a href="Client_Scripting_Events.html">Client Events</a></li><li id="n-Server-Functions"><a href="Server_Scripting_Functions.html">Server Functions</a></li><li id="n-Server-Events"><a href="Server_Scripting_Events.html">Server Events</a></li><li id="n-Shared-Functions"><a href="Shared_Scripting_Functions.html">Shared Functions</a></li><li id="n-Useful-Functions"><a href="Useful_Functions.html">Useful Functions</a></li><li id="n-MTA-Classes"><a href="MTA_Classes.html">MTA Classes</a></li><li id="n-MTA-Elements"><a href="Element.html">MTA Elements</a></li><li id="n-Element-Tree"><a href="Element_tree.html">Element Tree</a></li></ul></div></div><div role="search" class="portlet" id="p-search"><h3 id="p-search-label" lang="en" dir="ltr"><label for="searchInput">Search</label></h3><div class="pBody" id="searchBody"><form action="http://wiki.localhost/index.php" id="searchform"><input type="hidden" value="Special:Search" name="title"/><input type="search" name="search" placeholder="Search Multi Theft Auto: Wiki" title="Search Multi Theft Auto: Wiki [f]" accesskey="f" id="searchInput"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160; <input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/></form></div></div><div role="navigation" class="portlet" id="p-tb" aria-labelledby="p-tb-label"><h3 id="p-tb-label" lang="en" dir="ltr">Tools</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Preprod_Scripted_Analog_Inputs.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Preprod_Scripted_Analog_Inputs.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="http://wiki.localhost/index.php?title=Preprod:Scripted_Analog_Inputs&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="http://wiki.localhost/index.php?title=Preprod:Scripted_Analog_Inputs&amp;oldid=49075" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="http://wiki.localhost/index.php?title=Preprod:Scripted_Analog_Inputs&amp;action=info" title="More information about this page">Page information</a></li></ul></div></div></div><!-- end of the left (by default at least) column --><div class="visualClear"></div><div id="footer" role="contentinfo" lang="en" dir="ltr"><div id="f-copyrightico" class="footer-icons"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="../resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31"/></a></div><div id="f-poweredbyico" class="footer-icons"><a href="http://www.mediawiki.org/"><img src="../resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a></div><ul id="f-list"><li id="lastmod"> This page was last edited on 10 September 2016, at 18:48.</li><li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li><li id="privacy"><a href="Multi_Theft_Auto__Wiki_Privacy_policy.html" title="Multi Theft Auto: Wiki:Privacy policy">Privacy policy</a></li><li id="about"><a href="Multi_Theft_Auto__Wiki_About.html" title="Multi Theft Auto: Wiki:About">About Multi Theft Auto: Wiki</a></li><li id="disclaimer"><a href="Multi_Theft_Auto__Wiki_General_disclaimer.html" title="Multi Theft Auto: Wiki:General disclaimer">Disclaimers</a></li></ul></div></div><script src="../extensions/_MTAThemeExtensions/main11b9.js?303"></script><script src="../extensions/_MTAThemeExtensions/topmenu11b9.js?303"></script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.009","walltime":"0.009","ppvisitednodes":{"value":51,"limit":1000000},"ppgeneratednodes":{"value":68,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":512,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20191016151420","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":43});});</script></body></html>