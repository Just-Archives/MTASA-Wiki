<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>RU/GTA:SA Resource Streaming - Multi Theft Auto: Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"RU/GTA:SA_Resource_Streaming","wgTitle":"RU/GTA:SA Resource Streaming","wgCurRevisionId":39622,"wgRevisionId":39622,"wgArticleId":7675,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"RU/GTA:SA_Resource_Streaming","wgRelevantArticleId":7675,"wgRequestId":"89996a18a7d247f407aff852","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":false,"dialogs":false,"preview":false,"publish":false}});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook"/>
<script async="" src="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.5"/>
<link rel="shortcut icon" href="http://wiki.localhost/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.localhost/opensearch_desc.php" title="Multi Theft Auto: Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.multitheftauto.com/api.php?action=rsd"/>
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html"/>
<link rel="alternate" type="application/atom+xml" title="Multi Theft Auto: Wiki Atom feed" href="http://wiki.localhost/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-RU_GTA_SA_Resource_Streaming rootpage-RU_GTA_SA_Resource_Streaming skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">RU/GTA:SA Resource Streaming</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Multi Theft Auto: Wiki</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><b>Система GTA:SA Resource Streaming</b> загружает данные из диска в игровую память. Она разделена на управление IMG контейнером, потоковым чтением ресурсов, преобразованием в игровые объекты, загрузка сектора COL/IPL и игровую логику. Она была создана для <b>асинхронной загрузки ресурсов</b>.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.98.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.BD.D1.8B.D0.B5_.D1.82.D0.B8.D0.BF.D1.8B_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.BE.D0.B2"><span class="tocnumber">1</span> <span class="toctext">Известные типы ресурсов</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5"><span class="tocnumber">2</span> <span class="toctext">Описание</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_IMG_.D0.9A.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80.D0.BE.D0.BC"><span class="tocnumber">2.1</span> <span class="toctext">Управление IMG Контейнером</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#.D0.92.D0.BE.D0.B7.D0.BC.D0.BE.D0.B6.D0.BD.D1.8B.D0.B5_.D1.81.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.B8.D1.8F_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.B0"><span class="tocnumber">2.1.1</span> <span class="toctext">Возможные состояния загрузки ресурса</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#.28.D0.9F.D0.BE.D1.82.D0.BE.D1.87.D0.BD.D0.BE.D1.81.D1.82.D1.8C.29_.D0.A7.D1.82.D0.B5.D0.BD.D0.B8.D0.B5_.D0.A0.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.BE.D0.B2"><span class="tocnumber">2.2</span> <span class="toctext">(Поточность) Чтение Ресурсов</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.D0.9F.D1.80.D0.B5.D0.BE.D0.B1.D1.80.D0.B0.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B2_.D0.9E.D0.B1.D1.8A.D0.B5.D0.BA.D1.82.D1.8B_.D0.94.D0.B2.D0.B8.D0.B6.D0.BA.D0.B0"><span class="tocnumber">2.3</span> <span class="toctext">Преобразование в Объекты Движка</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.A1.D0.B5.D0.BA.D1.82.D0.BE.D1.80.D0.B0_COL.2FIPL"><span class="tocnumber">2.4</span> <span class="toctext">Загрузка Сектора COL/IPL</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.D0.98.D0.B3.D1.80.D0.BE.D0.B2.D0.B0.D1.8F_.D0.9B.D0.BE.D0.B3.D0.B8.D0.BA.D0.B0"><span class="tocnumber">2.5</span> <span class="toctext">Игровая Логика</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#.D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_.D0.9C.D1.83.D0.BB.D1.8C.D1.82.D0.B8.D0.BF.D0.BB.D0.B5.D0.B5.D1.80.D0.B0"><span class="tocnumber">3</span> <span class="toctext">Поддержка Мультиплеера</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#.D0.98.D0.B4.D0.B5.D0.B8_.D0.B4.D0.BB.D1.8F_.D0.A0.D0.B0.D1.81.D1.88.D0.B8.D1.80.D0.B5.D0.BD.D0.B8.D1.8F"><span class="tocnumber">4</span> <span class="toctext">Идеи для Расширения</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Fibered_.D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0"><span class="tocnumber">4.1</span> <span class="toctext">Fibered Загрузка</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.98.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.BD.D1.8B.D0.B5_.D1.82.D0.B8.D0.BF.D1.8B_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.BE.D0.B2">Известные типы ресурсов</span></h2>
<table class="wikitable">

<tr>
<th> Имя
</th>
<th> ID диапазон
</th>
<th> Описание
</th></tr>
<tr>
<td>Модели (.DFF)
</td>
<td>0-19999
</td>
<td>Все игровые модели входят в эти ID. Внутренне этот диапазон дальше разделяется на подсекции объектов, автомобилей и педов.
</td></tr>
<tr>
<td>Текстурные Словари (.TXD)
</td>
<td>20000-24999
</td>
<td>Содержит слоты текстурных словарей. Текстурные словари это контейнеры со всеми игровыми текстурами. Игра присваивает текстурные словари к моделям.
</td></tr>
<tr>
<td>Секторы Столкновений (.COL)
</td>
<td>25000-25255
</td>
<td>Слоты хранят все загруженные секторы столкновений. Секторы столкновений это COLL контейнеры, которые могут ссылаться и простираться через внутриигровые границы (основано на зданиях, которые используют их).
</td></tr>
<tr>
<td>IPL Секторы (.IPL)
</td>
<td>25256-25510
</td>
<td>Слоты содержат все загруженные IPL секторы. IPL секторы представлены бинарными .ipl файлами внутри .IMG контейнера. Игра загружает их внуть своих рамок только когда они будут необходимы.
</td></tr>
<tr>
<td>Контейнеры Патчнодов (.DAT)
</td>
<td>25511-25574
</td>
<td>Патчноды выровнены на секторы 8*8 по 750*750 юнитам. Когда игра ссылаться на такой квадрат, она загружает связанные файлы патчнодов, которые нумерованы в соответствии с формулой (height * rowLen + rowIndex).
</td></tr>
<tr>
<td>Блоки Анимаций (.IFP)
</td>
<td>25575-25754
</td>
<td>Блоки анимации содержат все последовательности анимаций. Модели могут ссылаться на анимационные блоки, поэтому они запрашивают их вместе.
</td></tr>
<tr>
<td>Записи (.RRR)
</td>
<td>25755-25819
</td>
<td>Записи хранят предварительно записанные данные игровых движений. Эти игровые движения используются во время миссий когда вы гонитесь за кем-то или прицеливаетесь из окна пока друг ведет.
</td></tr></table>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5">Описание</span></h2>
<h3><span class="mw-headline" id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_IMG_.D0.9A.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80.D0.BE.D0.BC">Управление IMG Контейнером</span></h3>
<p>Во время инициализации движка, игра загружает файлы конфигурации, которые говорят ему какие .IMG контейнеры использовать. Когда Система стриминга инициализирована, она пытается загрузить зарегистрированные .IMG контейнеры. Каждый .IMG контейнер ссылается используя уникальный индекс внтури IMGFile массива. Игра держит открытыми хэндлы файлов .IMG контейнеров, так что она может всегда читать из них.
</p><p>Когда .IMG контейнер будет загружен, каждый файл может представить новый ID ресурса внутри движка (структура CModelInfoSA). <b>Модели</b> получат ID путем сравнением их имен с .IDE записью. Если ничего не найдено, движок поддерживает небольшой кэш ресурса. Эти ресурсы еще могут быть загружены используя RequestSpecialModel. <b>Текстурный Словарь</b> получает новый ID. Имеется жесткий лимит в 5000 TXD. <b>COLL</b> и <b>IPL</b> секторы также получают новые ID основанные на порядке загрузки. Все остальные ресурсы поступают также, следую этим же принципам.
</p><p>Внутренний CModelInfoSA массив представляет каждую запись ресурса в .IMG файлах. Движок поддерживает всего 26310 ресурсных ID.
</p>
<h4><span class="mw-headline" id=".D0.92.D0.BE.D0.B7.D0.BC.D0.BE.D0.B6.D0.BD.D1.8B.D0.B5_.D1.81.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.B8.D1.8F_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.B0">Возможные состояния загрузки ресурса</span></h4>
<table class="wikitable">
<tr>
<th>Имя
</th>
<th>Описание
</th></tr>
<tr>
<td>MODEL_UNAVAILABLE
</td>
<td>Ресурс не был загружен. Ни один из игровых ресурсов для этой записи не был загружен. Этот ресурс не используется ни одной из частей игрового движка.
</td></tr>
<tr>
<td>MODEL_LOADED
</td>
<td>Этот ресурс был загружен Системой стриминга. Он готов быть использован игровым движком.
</td></tr>
<tr>
<td>MODEL_LOADING
</td>
<td>Этот ресурс находится в очереди быть-загруженным. Он ожидает взятия Системой стриминга для чтения с диска.
</td></tr>
<tr>
<td>MODEL_QUEUE
</td>
<td>Слайсер в настоящее время читает данные из диска для этого ресурса.
</td></tr>
<tr>
<td>MODEL_RELOAD
</td>
<td>Этот ресурс в настоящее время загружается в сопрограмму. Данные которые с ним связаны слишком большие чтобы загрузить их сразу же.
</td></tr></table>
<p><a href="../File_Res_loader_sys.html" class="image"><img alt="Res loader sys.png" src="../../images/thumb/2/2d/Res_loader_sys.png/960px-Res_loader_sys.png" width="960" height="398" srcset="/images/2/2d/Res_loader_sys.png 1.5x, /images/2/2d/Res_loader_sys.png 2x" /></a>
</p>
<h3><span class="mw-headline" id=".28.D0.9F.D0.BE.D1.82.D0.BE.D1.87.D0.BD.D0.BE.D1.81.D1.82.D1.8C.29_.D0.A7.D1.82.D0.B5.D0.BD.D0.B8.D0.B5_.D0.A0.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.BE.D0.B2">(Поточность) Чтение Ресурсов</span></h3>
<p>Существует совершенно отдельная система просто для чтения порций данных с диска, известная как <b>streaming runtime</b>. Игра может создавать <b>потоковые хэндлы</b> для файлов на диске. При вызове функции <b>ReadStream</b>, будет сделан запрос на чтение данных из потокового хендла. Процесс чтения обеспечивается структурами <b>syncSemaphore</b> которые удерживают внутренние данные о процессе чтения (такие как хэндл файла или структуры OVERLAPPED). Вызов <b>GetSyncSemaphoreStatus</b> c индексом syncSemaphore в качестве аргумента будет возвращать статус запроса (т.е. чтение завершено). <b>CancelSyncSemaphore</b> останавливает любые асинхронные запросы.
</p><p>Во время старта, система проверяет возможности системы. По умолчанию, <b>поточность включена</b>. Для проверки поддержки этого, предпринимается попытка чтения из GTA3.IMG используя перекрытый ВВОД/ВЫВОД. Система выберет наилучшую совместимую конфигурацию. На современных машинах, это значит поточность с перекрытым ВВОДОМ/ВЫВОДОМ. В случае худшего сценария, игра читает данные синхронно в одиночном потоке с остановкой выполнения игры, если данные читаются из медленного медиа-хранилища.
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B5.D0.BE.D0.B1.D1.80.D0.B0.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B2_.D0.9E.D0.B1.D1.8A.D0.B5.D0.BA.D1.82.D1.8B_.D0.94.D0.B2.D0.B8.D0.B6.D0.BA.D0.B0">Преобразование в Объекты Движка</span></h3>
<p>Система стриминга изначально обеспечивает два читающих слайсера. Читающий слайсер проверяет какие запрашиваемые данные ближе в .IMG контейнере и сразу читает несколько одномоментно. Модифицируя логику движка можно ввести поддержку произвольного числа слайсеров, которые все будут делиться порциями внутри буфера чтения. Чем больше слайсеров, тем меньше секция буфера чтения для каждого. Если прочитанные данные не входят в один слайсер, Система стриминга ждет завершения всех небольших запросов и тогда читает большие данные в первом слайсере используя весь буфер чтения. Размер буфера чтения определяется наибольщим ресурсом внтури всех зарегистрированных .IMG контейнеров. 
</p><p>Существует <b>4 состояния</b>, которые могут иметь <b>слайсеры</b>: простой, буферизация, загрузка и ожидание. Слайсеры с простоем ждут запроса, который может занять их. Когда слайсеры буферизируются, они ждут до конца свои запросы чтения. Слайсеры загрузки ждут пока игра загрузит все игровые ресурсы из них. Ожидание является исключительным статусом, который появляется если слайсер запрошен на передачу данных для преобразования объекта движка, но запрос чтения еще не завершен.
</p><p>Загрузка самый интересный статус. Слайсер ложит необработанные данные в процедуру загрузчика вместе с их <b>ID модели</b>. Используя ID модели, движок знает как эти сырые данные должны быть представлены. Например, модель с id 1361 это ресурс модели, который хранится в .DFF файле. Процедуры загрузчика обычно загружают данные одномоментно. Если найденные данные слишком большие, они будут <b>загружены несколькими толчками слайсера</b> (слайсер находится в <b>состоянии загрузка</b>). Затем данные будут обработаны в <b>сопрограмме</b>. Изначально, только <b>текстурные словари</b> которые превышают определенное количество блоков используют эту возможность. Также, движок был оптимизирован считать что все данные загружаются в двух толчках слайсеров (максимально). 
</p><p>Каждый слайсер имеет свой <b>syncSemaphore</b> из streaming runtime. Индекс syncSemaphore соответствует индексу слайсера.
</p>
<h3><span class="mw-headline" id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.A1.D0.B5.D0.BA.D1.82.D0.BE.D1.80.D0.B0_COL.2FIPL">Загрузка Сектора COL/IPL</span></h3>
<p>GTA:SA движок сопоставляет COLL и IPL секторы мировым координатам границ. Когда позиция стриминга (изначально позиция игрока) пересекается с любым сектором, он будет запрошен на загрузку. Эта работа обеспечивается в классе-шаблоне <b>Sectorizer</b>. Каждый COLL и IPL сектор добавляется в дерево квадрантов для ускорения обзора территории мира. Секторы выделяются из личного пула данных. Секторы имеют свой менеджер, которй специализируется на работе Sectorizer'ов (загрузка и выгрузка, преобразование индекса в id модели, логика маркировки сектора).
</p>
<h3><span class="mw-headline" id=".D0.98.D0.B3.D1.80.D0.BE.D0.B2.D0.B0.D1.8F_.D0.9B.D0.BE.D0.B3.D0.B8.D0.BA.D0.B0">Игровая Логика</span></h3>
<p>Когда камера приближается к земле, Система стриминга обновляет толчком игровое окружение. Оно выполняет предзагрузку моделей событий и стриминг зон событий. Эти возможности были отключены в МТА, но являются интересными если рассматривается поддержка одиночной игры.
</p>
<h2><span class="mw-headline" id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_.D0.9C.D1.83.D0.BB.D1.8C.D1.82.D0.B8.D0.BF.D0.BB.D0.B5.D0.B5.D1.80.D0.B0">Поддержка Мультиплеера</span></h2>
<p>MTA:SA устанавливает высокие требования к движку GTA:SA. Система стриминга должна быть ключевым местом для загрузки ресурсов. Следовательно, изначально система не предполагает взаимодействия с внешними источниками, такими как MTA. 
</p><p>Для исправления этой проблемы, вся система должна быть разобрана и правильно расширена. Функции <b>RequestModel</b> и <b>FreeModel</b> используются для запроса ресурсов для каждого игрового экземпляра. Расширением этих функций, МТА может предложить пользовательские ресурсы игровому движку (т.е. модели и коллизии). Простого ASM хука недостаточно, потому что код требует тяжелой настройки которая должна быть понятна для каждого MTA разработчика. Например, для предотвращения утечек памяти и нестабильности, работа Поточного <b>слайсера</b> и очередь загрузчика должны быть настроены в соответствии с тем как MTA манипулярует статусами ресурса.
</p><p>В MTA:Eir, поддержка моделей была исправления предложением ресурсов модели на базовой информации о ней и предотвращением удаления пользовательских коллизий когда COL секторы были выгружены.
</p>
<h2><span class="mw-headline" id=".D0.98.D0.B4.D0.B5.D0.B8_.D0.B4.D0.BB.D1.8F_.D0.A0.D0.B0.D1.81.D1.88.D0.B8.D1.80.D0.B5.D0.BD.D0.B8.D1.8F">Идеи для Расширения</span></h2>
<p>Изначально, загрузчик не работает с достаточной эффективностью. Как сказано выше, система имитирует поведелние сопрограммы. Если очень большие .DFF модели были загружены, система стриминга будет вызывать падения FPS. Путь загрузки текстурных контейнеров не является совершенным, даже если их загрузка разделена на два толчка. В теории преобразование каждой текстуры в игровой экземпляр является сложной задачей. С самого начала, стриминг не зависит от времени процесс загрузки. Если бы это было, то система может отказывать когда TXD контейнер занимает слишком много времени для загрузки.
</p><p>Мое продложение заключается в том, чтобы какждый слайсер получил файбер в MTA менеджере. В каждом кадре (и во всех других вероятных мементах) все файберы были обновлены, таким образом обеспечивая загрузку ресурса. Так каждый файбер обеспечивает свой стек выполнения, что избегает сложного кода. Когда определенная часть данных прочитана из RenderWare потока, выполнение файбера обрывается. Такое изменение загрузки ресурсов сделает сглаженным FPS GTA:SA во время пересечения мира.
</p><p>Проблемы с этим предложеним находится в том, что RenderWare функции стриминга присоединены к сетевому модулю.
</p>
<h3><span class="mw-headline" id="Fibered_.D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0">Fibered Загрузка</span></h3>
<p>Эта техника используется в MTA:Eir для увеличения произвольности на слабых компьютерах. Как правило, он сглаживает количество FPS игры удалением острых лагов. В стандартной GTA:SA, ресурсы в основном загружаются одномоментно. С другой стороны, используя <a href="../MTA_Eir/functions/engineStreamingSetFiberedLoadingEnabled.html" title="MTA:Eir/functions/engineStreamingSetFiberedLoadingEnabled">fibered loading</a>, загрузка ресурсов зависит от времени за которое Система стриминга может занимать в каждом кадре. Время которое может потребоваться, получается из общего времени выполнения последнего кадра. 
</p><p>Предполагается, что очень большие TXD контейнеры  хранятся в GTA3.IMG. Такие ресурсы забирают относительно много времени на буферизацию в игровую память и попытка инициализации пока стриминг загружается, может привести к лагам потому что все данные обрабатываются сразу. Если fibered загрузка включена, сопрограмма (т.н. fiber) создается для каждой <i>слайсера</i> загрузки ресурса с его исполнительным стеком. Когда загрузчик пытается прочесть ресурсы из буфера, исполнительный менеджер fiber'а проверяет был ли уже взят <a href="../MTA_Eir/functions/engineStreamingSetFiberedPerfMultiplier.html" title="MTA:Eir/functions/engineStreamingSetFiberedPerfMultiplier">он в свое время</a>. Если да, он останавливается во время процесса чтения. Выполнение будет продолжено в следующем игровом кадре.
</p>
<!-- 
NewPP limit report
Cached time: 20190629063113
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.008 seconds
Real time usage: 0.009 seconds
Preprocessor visited node count: 43/1000000
Preprocessor generated node count: 48/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key mta_wiki-wiki_dev_:pcache:idhash:7675-0!*!0!!en!5!* and timestamp 20190629063113 and revision id 39622
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.multitheftauto.com/index.php?title=RU/GTA:SA_Resource_Streaming&amp;oldid=39622">https://wiki.multitheftauto.com/index.php?title=RU/GTA:SA_Resource_Streaming&amp;oldid=39622</a>"</div>
					<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="GTA_SA_Resource_Streaming.html" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://wiki.localhost/index.php?title=Talk:RU/GTA:SA_Resource_Streaming&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="http://wiki.localhost/index.php?title=RU/GTA:SA_Resource_Streaming&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://wiki.localhost/index.php?title=RU/GTA:SA_Resource_Streaming&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://wiki.localhost/index.php?title=Special:CreateAccount&amp;returnto=RU%2FGTA%3ASA+Resource+Streaming" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://wiki.localhost/index.php?title=Special:UserLogin&amp;returnto=RU%2FGTA%3ASA+Resource+Streaming" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../Main_Page.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Home"><a href="../Main_Page.html">Home</a></li>
											<li id="n-How-you-can-help"><a href="../How_you_can_help.html">How you can help</a></li>
											<li id="n-recentchanges"><a href="../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.multitheftauto.com/wiki/OnDgsDestroy" title="Load a random page [x]" accesskey="x">Random page</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-reference" role="navigation">
		<h3>reference</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Client-Functions"><a href="../Client_Scripting_Functions.html">Client Functions</a></li>
											<li id="n-Client-Events"><a href="../Client_Scripting_Events.html">Client Events</a></li>
											<li id="n-Server-Functions"><a href="../Server_Scripting_Functions.html">Server Functions</a></li>
											<li id="n-Server-Events"><a href="../Server_Scripting_Events.html">Server Events</a></li>
											<li id="n-Shared-Functions"><a href="../Shared_Scripting_Functions.html">Shared Functions</a></li>
											<li id="n-Useful-Functions"><a href="../Useful_Functions.html">Useful Functions</a></li>
											<li id="n-MTA-Classes"><a href="../MTA_Classes.html">MTA Classes</a></li>
											<li id="n-MTA-Elements"><a href="../Element.html">MTA Elements</a></li>
											<li id="n-Element-Tree"><a href="../Element_tree.html">Element Tree</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.localhost/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Multi Theft Auto: Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="../Special_WhatLinksHere/RU/GTA_SA_Resource_Streaming.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="../Special_RecentChangesLinked/RU/GTA_SA_Resource_Streaming.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="http://wiki.localhost/index.php?title=RU/GTA:SA_Resource_Streaming&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="http://wiki.localhost/index.php?title=RU/GTA:SA_Resource_Streaming&amp;oldid=39622" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="http://wiki.localhost/index.php?title=RU/GTA:SA_Resource_Streaming&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
				<div id="p-lang" class="portlet" role="navigation">
				<h3>In other languages</h3>

				<div class="pBody">
					<ul>
													<li class="interlanguage-link interwiki-en"><a href="http://wiki.multitheftauto.com/index.php?title=GTA:SA_Resource_Streaming" title="GTA:SA Resource Streaming – English" lang="en" hreflang="en">English</a></li>
											</ul>

									</div>
			</div>
				</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="http://www.gnu.org/copyleft/fdl.html"><img src="../../resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31"/></a>
							</div>
					<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="../../resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 27 May 2014, at 15:58.</li>
									<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
									<li id="privacy"><a href="../Multi_Theft_Auto__Wiki_Privacy_policy.html" title="Multi Theft Auto: Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Multi_Theft_Auto__Wiki_About.html" title="Multi Theft Auto: Wiki:About">About Multi Theft Auto: Wiki</a></li>
									<li id="disclaimer"><a href="../Multi_Theft_Auto__Wiki_General_disclaimer.html" title="Multi Theft Auto: Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.GoogleCodePrettify"]);});</script>
<script src="../../extensions/_MTAThemeExtensions/main11b9.js?303"></script><script src="../../extensions/_MTAThemeExtensions/topmenu11b9.js?303"></script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":33});});</script></body></html>
