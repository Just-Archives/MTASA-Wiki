<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>FR/Introduction Programmation - Multi Theft Auto: Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"FR/Introduction_Programmation","wgTitle":"FR/Introduction Programmation","wgCurRevisionId":56176,"wgRevisionId":56176,"wgArticleId":6171,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"FR/Introduction_Programmation","wgRelevantArticleId":6171,"wgRequestId":"a9d363c12ae7767119868b6d","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":false,"dialogs":false,"preview":false,"publish":false}});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook"/>
<script async="" src="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.5"/>
<link rel="shortcut icon" href="http://wiki.localhost/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.localhost/opensearch_desc.php" title="Multi Theft Auto: Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.multitheftauto.com/api.php?action=rsd"/>
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html"/>
<link rel="alternate" type="application/atom+xml" title="Multi Theft Auto: Wiki Atom feed" href="http://wiki.localhost/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-FR_Introduction_Programmation rootpage-FR_Introduction_Programmation skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">FR/Introduction Programmation</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Multi Theft Auto: Wiki</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Les ressources sont les parties clées de MTA. Une ressource est un dossier ou un .zip qui contient plusieurs fichiers, ainsi qu'une meta qui dit au serveur comment la resource doit-elle être chargée. Une ressource peut être comparée comme un programme qu'on peut lancer ou arrêter, il est possible de lancer plusieurs ressources en même temps.
</p><p>Tout ce qui a un rapport avec la programmation se passe dans les ressources, se que fait la ressource, définie si c'est un gamemode, une map or quelque chose d'autre. MTA s'installe avec des ressources que vous pouvez facultativement utiliser dans vos gamemodes, comme la ressource "maplimits" pour garder les joueurs dans une certaine zone ou encore "deathpickups" pour créer des pickups pour ramasser une arme.
</p><p><b>La première chose à faire avant de pouvoir programmer en Lua, c'est de se procurer un éditeur de texte qui supporte le Lua. Il vous sera beaucoup plus facile que de le faire avec le bloc-note de Windows. Nous vous recommandons donc <a rel="nofollow" class="external text" href="https://code.visualstudio.com/">Visual Studio Code</a> ou <a rel="nofollow" class="external text" href="http://notepad-plus.sourceforge.net/uk/site.htm">Notepad++</a>. Il y a aussi un logiciel non officiel <a href="../MTASE.html" title="MTASE">MTA Script Editor</a> (malheureusement l'auteur ne travail plus dessus) que vous pouvez tester.</b>
</p><p>Pour <b>Visual Studio Code</b>, il est également recommandé d'installer <a rel="nofollow" class="external text" href="https://marketplace.visualstudio.com/items?itemName=subtixx.mtasa-lua">ce plugin</a> qui permettra à l'éditeur de reconnaître les fonctions MTA, proposer de l'auto-complétion ainsi que la documentation associée.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Cr.C3.A9er_un_script_qui_fonctionne"><span class="tocnumber">1</span> <span class="toctext">Créer un script qui fonctionne</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#O.C3.B9_sont_tous_les_scripts_.3F"><span class="tocnumber">1.1</span> <span class="toctext">Où sont tous les scripts&#160;?</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Identifier_votre_ressource"><span class="tocnumber">1.2</span> <span class="toctext">Identifier votre ressource</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Cr.C3.A9er_un_script_simple"><span class="tocnumber">1.3</span> <span class="toctext">Créer un script simple</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Lancer_le_gamemode"><span class="tocnumber">1.4</span> <span class="toctext">Lancer le gamemode</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Cr.C3.A9er_une_commande"><span class="tocnumber">2</span> <span class="toctext">Créer une commande</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#A_propos_du_addCommandHandler"><span class="tocnumber">2.1</span> <span class="toctext">A propos du addCommandHandler</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Ecrire_la_fonction"><span class="tocnumber">2.2</span> <span class="toctext">Ecrire la fonction</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Ce_que_vous_devez_savoir"><span class="tocnumber">3</span> <span class="toctext">Ce que vous devez savoir</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Les_scripts_client_et_serveur"><span class="tocnumber">3.1</span> <span class="toctext">Les scripts client et serveur</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Ressources_plus_complexes"><span class="tocnumber">3.2</span> <span class="toctext">Ressources plus complexes</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Premier_exemple_-_Un_script_utile"><span class="tocnumber">3.2.1</span> <span class="toctext">Premier exemple - Un script utile</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Second_exemple_-_Un_gamemode"><span class="tocnumber">3.2.2</span> <span class="toctext">Second exemple - Un gamemode</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Troisi.C3.A8me_exemple_-_Une_carte"><span class="tocnumber">3.2.3</span> <span class="toctext">Troisième exemple - Une carte</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#.C3.89v.C3.A9nements"><span class="tocnumber">3.3</span> <span class="toctext">Événements</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#O.C3.B9_aller_d.27ici"><span class="tocnumber">4</span> <span class="toctext">Où aller d'ici</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Cr.C3.A9er_un_script_qui_fonctionne">Créer un script qui fonctionne</span></h2>
<p>Nous allons voir tout d'abord comment créer un simple script étapes par étapes qui permettra aux joueurs de se déplacer dans la ville. Dans ce tutoriel, on utilisera notepad++.
</p>
<h3><span class="mw-headline" id="O.C3.B9_sont_tous_les_scripts_.3F">Où sont tous les scripts&#160;?</span></h3>
<p>Laissez moi d'abord vous présenter comment s’organise une ressource. Allez dans votre dossier <b>MTA San Andreas</b> et et suivez le chemin suivant:
</p><p>	/server/mods/deathmatch/resources/
</p><p>Vous y verrez de nombreux fichier avec l'extension .zip, se sont des ressources avec à l'intérieur des exemples de scripts . Toutes les ressources chargées sont dézippées par le serveur afin de pouvoir les exécuter (les .zip ne sont pas obligatoires, vous pouvez aussi laissez votre ressource en tant que dossier). Pour créer votre propre ressource, créez simplement un nouveau dossier et nommez le comme vous voulez (Ne pas utiliser d'espace, utilisez plutôt un _) . Nommez le "myserveur" pour ce tutoriel.
</p><p>Maintenant entrez dans votre dossier. Le chemin devrait donc être
</p><p>	/server/mods/deathmatch/resources/myserveur/
</p>
<h3><span class="mw-headline" id="Identifier_votre_ressource">Identifier votre ressource</span></h3>
<p>Pour que le serveur puisse savoir ce que contient votre ressource, un fichier <i>meta.xml</i> doit être créé afin d'établir une liste du contenu du dossier. Cette 'meta.xml' doit être à la racine de votre ressource ( et non pas dans un autre sous-dossier ), donc dans le dossier "myserveur" dans notre cas. Donc ouvrez notepadd++, créer un nouveau fichier (Ctrl+N), puis faite "Enregistrez sous ..." (Ctrl+Alt+S), dans "Nom:" vous écrivez "meta" et dans "Type:", sélectionnez "*.xml" ( avant-dernier de la liste ), sauvegardez le dans votre dossier "myserveur".
</p><p>Maintenant, écrivez le code suivant dans votre <i>meta.xml</i>:
</p>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
     &lt;info author="Votre Nom" type="gamemode" name="Mon serveur" description="Mon premier serveur MTA" /&gt;
     &lt;script src="script.lua" /&gt;
&lt;/meta&gt;
</pre>
<p>Dans la balise <i>&lt;info /&gt;</i>, il y a le champ "type" qui indique si la ressource est un <i>gamemode</i> ou une <i>map</i>, on y reviendra plus tard. Un gamemode est ce dont vous avez besoin pour que votre serveur est une base. 
</p><p>La balise <i>&lt;script /&gt;</i> indique les scripts qui sont dans la ressource, que l'on va maintenant créer.
</p>
<h3><span class="mw-headline" id="Cr.C3.A9er_un_script_simple">Créer un script simple</span></h3>
<p>Notez que dans la balise <i>&lt;script /&gt;</i>, le fichier .lua n'est pas dans un autre sous-dossier. Donc on va créer notre script.lua au même endroit que notre meta.xml ( Reproduisez la même opération mais "Nom:" écrivez 'script' et pour "Type:" choisissez 'Lua(*.lua)' ) puis copier-coller le code suivant:
</p>
<pre class="prettyprint lang-lua">
function joinHandler()
	local x = 1959.55
	local y = -1714.46
	local z = 10
	spawnPlayer(source, x, y, z)
	fadeCamera(source, true)
	setCameraTarget(source, source)
	outputChatBox("Bienvenue sur mon serveur", source)
end
addEventHandler("onPlayerJoin", getRootElement(), joinHandler)
</pre>
<p>Ce script va fous faire apparaître aux coordonnées (x, y, z) spécifié dans le code, lorsque vous connecterez au serveur. La fonction <i>fadeCamera</i> sinon l'écran restera noir. Vous devez aussi dire à la camera de suivre le joueur grâce à la fonction 'setCameraTarget' (sinon il verra une mer bleu).
</p><p>La variable <b>source</b> indique qui 'déclenche' la fonction. Le fonction se 'déclenche' lorsqu'un joueur rejoins le serveur, vous utiliserez cette variable pour voir qui à rejoins le serveur. Donc lorsque un joueur( "la source" ) rejoindra notre serveur, on le fera apparaître aux coordonnées indiquées .
</p><p>Focalisons-nous sur <a href="../AddEventHandler.html" title="AddEventHandler">addEventHandler</a>, vous pouvez voir 3 choses: 'onPlayerJoin', qui indique quand exécuter la fonction X. getRootElement(), qui indique qui/quoi peut être déclencher la fonction (getRootElement() veut dire toutes les choses et tous les joueurs). Et enfin la fonction X à exécuter (ici joinHandler). Pour les autres détails, nous verrons plus tard dans d'autres exemples mais tout d'abord testons notre premier gamemode!
</p>
<h3><span class="mw-headline" id="Lancer_le_gamemode">Lancer le gamemode</span></h3>
<p>Pour lancer le serveur, lancer simplement le 'MTA Server.exe' qui se trouve dans votre dossier 'MTA San Andreas &gt; server'. Une liste d'info concernant le serveur apparaîtra en premier; notez le port du serveur ( 22003 par défaut ), vous en aurez besoin pour rejoindre le serveur. Après, le serveur charge toutes les ressources du dossier 'resource', et enfin "ready to accept connections!"
</p><p>Avant de pouvoir vous connecter, vous devez lancer votre gamemode. Tapez "start myserveur" et appuyer sur Entrer. Le serveur va alors lancer le gamemode que nous avons créé, et nous affichera aussi les erreurs s'il y en a. Maintenant, vous pouvez lancer MTA, cliquez sur "Quick Connect" et écrivez ceci: Dans Host: le1er champ: 127.0.0.1 ou localhost ( cela signifie que vous vous connectez au serveur du pc actuel ) et le 2ème champ: le port ( ici 22003 ) et cliquez sur 'Connect'. Si tout se passe bien, après quelques secondes, vous devriez apparaître et pouvoir allez où vous voulez.
</p><p>Ensuite nous allons créer une commande que les joueurs pourront utiliser pour faire apparaître une voiture à coté d'eux.
</p>
<h2><span class="mw-headline" id="Cr.C3.A9er_une_commande">Créer une commande</span></h2>
<p>Revenons à l'intérieur de notre <i>script.lua</i>. Tout d'abord, nous devons créer une fonction qu'on pourra appeler/exécuter grâce à notre commande et la fonction 'addCommandHandler' afin de créer la commande que les joueurs pourront taper dans le chat( T ) ou la console( F8 ).
</p>
<pre class="prettyprint lang-lua">
-- On crée la fonction qui sera appelée par notre commande avec les arguments: thePlayer, command, vehicleModel
function createVehicleForPlayer(thePlayer, commandName, vehicleModel)
   -- Ici on crée le véhicule
end
-- on crée la commande et on l'attache à notre fonction
addCommandHandler("createVehicle", createVehicleForPlayer)
</pre>
<p><i>Note: Grâce au wiki, vous pouvez cliquer sur le nom des fonctions et cela vous redirigera sur la documentation de cette fonction.</i>
</p>
<h4><span class="mw-headline" id="A_propos_du_addCommandHandler">A propos du addCommandHandler</span></h4>
<p>Le premier argument du <a href="../AddCommandHandler.html" title="AddCommandHandler">addCommandHandler</a> est le nom de la commande the player will be able to enter, le second le nom de la fonction à appeler, dans notre cas, <i>createVehicleForPlayer</i>.
</p><p>Si vous avez déjà de l'expérience dans le codage, vous savez qu'un fonction s'appelle comme ceci:
</p>
<pre class="prettyprint lang-lua">
nomDeLaFonction(argument1, argument2, argument3, ..)
</pre>
<p>Si l'on regarde bien l'exemple ci-dessus, nous pouvons voir que l'argument1 est thePlayer and argument2 le commandName. thePlayer est celui qui à tapé la commande et commandName contient le nom de la commande qu'il à tapé. Donc si un joueur tape "/greet", cet argument va contenir "greet". argument3 c'est ce que le joueur à tapé en plus de la commande, vous allez apprendre ceci dans le tutoriel. N'oubliez jamais que les deux premiers arguments sont les arguments standards, mais vous pouvez les renommé si vous voulez, seul l'ordre est important.
</p><p>Par exemple: Un joueur tape "createVehicle 468" pour faire apparaître une Sanchez, la fonction addCommandHandler va appeler notre fonction <b>createVehicleForPlayer</b>, comme ceci:
</p>
<pre class="prettyprint lang-lua">
createVehicleForPlayer(thePlayer,"createVehicle","468") -- thePlayer est l’élément joueur qui a tapé la commande
</pre>
<p>Comme nous pouvons le voir, il fournit plusieurs paramètres: le joueur qui a tapé la commande, la commande qu'il a tapé, et n'importe quelle texte qu'il a mis après, dans notre cas, "468" comme id de la Sanchez. Les deux premiers paramètres sont les même pour tous les addCommandHandler qu'on peut retrouver sur la page du <a href="../AddEventHandler.html" title="AddEventHandler">addEventHandler</a>. Vous devez toujours définir au moins ces deux paramètres pour utiliser les arguments après eux (par exemple pour traiter le texte qui a été entré après la commande, comme dans notre exemple le modèle du véhicule).
</p><p><i>Note: Vous devez créer la commande APRÈS la fonction que vous allez utiliser pour cette commande, sinon il ne trouvera pas la fonction.</i>
</p>
<h4><span class="mw-headline" id="Ecrire_la_fonction">Ecrire la fonction</span></h4>
<p>Pour remplir notre fonction d'instructions, nous devons d'abord pensez à ce que nous devons faire:
</p>
<ul><li> Récupérer la position du joueur, donc on connaîtra la position où faire apparaître le véhicule (on veut le faire apparaître à droite du joueur)</li>
<li> Calculer la position où faire apparaître le véhicule (nous ne voulons pas que le véhicule apparaisse dans le joueur)</li>
<li> Faire apparaître les véhicule</li>
<li> Vérifier si le véhicule a bien apparus, ou afficher un message d'erreur.</li></ul>
<p>Pour ça, nous devons utiliser plusieurs fonctions. Pour trouver la fonction que nous devons utiliser, il faut aller faire un tour dans la <a href="../Scripting_Functions.html" title="Scripting Functions" class="mw-redirect">La liste des fonctions serveur</a>. D'abord nous avons besoin d'une fonction pour obtenir la position du joueur. Puisque les joueurs sont des éléments, nous devons allez dans la rubrique <b>Element functions</b> où l'on pourra trouver la fonction <a href="../GetElementPosition.html" title="GetElementPosition">getElementPosition</a>. En cliquant sur le nom de la fonction, le wiki va vous afficher sa description. On peut y voir la syntaxe, qu'est-ce que la fonction retourne. La syntaxe nous montre les argument qu'on peut ou qu'on doit envoyer.
</p><p>Pour <a href="../GetElementPosition.html" title="GetElementPosition">getElementPosition</a>, la syntaxe est:
</p>
<pre class="prettyprint lang-lua">
float, float, float getElementPosition ( element theElement )
</pre>
<p>Les trois <b>float</b> devant le nom de la fonction est le type de variable que la fonction nous retourne. Dans notre cas, la fonction retourne trois nombres à virgule(x, y et z). Dans les parenthèses, on peut voir les arguments que l'on doit envoyer, dans notre cas, l’élément dont on veut récupérer la position, le joueur dans notre exemple.
</p>
<pre class="prettyprint lang-lua">
function createVehicleForPlayer(thePlayer, command, vehicleModel)
	-- on récupère la position x,y,z dans des variables locales
	-- une variable locale n'existe que dans le "périmètre" actuel. Ici, les variable x, y et z sont des variables locales qui se détruiront à la fin de la fonction.
	local x,y,z = getElementPosition(thePlayer)
end
</pre>
<p>Ensuite, il faut s'assurer que le véhicule n'apparaît pas directement dans le joueur, donc on ajoute quelques unités à la variable <i>x</i>, qui le fera apparaître plus à l'est par rapport au joueur.
</p>
<pre class="prettyprint lang-lua">
function createVehicleForPlayer(thePlayer, command, vehicleModel)
	local x,y,z = getElementPosition(thePlayer) -- On prent la position du joueur qui a tapé la commande
	x = x + 5 -- on ajoute 5 unité sur l'axes des x
end
</pre>
<p>Maintenant nous avons besoin d'une autre fonction, celle qui va faire apparaître le véhicule. Nous allons la cherché encore une fois dans la <a href="../Scripting_Functions.html" title="Scripting Functions" class="mw-redirect">liste des fonctions serveur</a>, mais cette fois, comme nous parlons d'un véhicule, nous devons donc aller dans la catégorie<b>Vehicle functions</b>, où l'on va trouver la fonction <a href="../CreateVehicle.html" title="CreateVehicle">createVehicle</a>. Dans la syntaxe, nous pouvons voir que cette fonction ne retourne qu'une seule variable, le véhicule ( de type élément ) que nous venons de créer. Nous pouvons aussi voir qu'il y a des arguments entre crochets [], cela veut dire que ce sont des arguments optionnels.
</p><p>Nous avons déjà tous les arguments pour la fonction <a href="../CreateVehicle.html" title="CreateVehicle">createVehicle</a> dans notre fonction: La position que nous avons juste calculée dans les variables "x, y, z"  et l'id du véhicule que nous avons fourni par la commande ("/createVehicle 468") et qui est stocké dans la variable <i>vehicleModel</i>.
</p>
<pre class="prettyprint lang-lua">
function createVehicleForPlayer(thePlayer, command, vehicleModel)
	local x,y,z = getElementPosition(thePlayer) -- récupere la position du joueur dans les variables x, y et z
	x = x + 5 -- rajoute 5 unités sur x
	-- on crée le véhicule et on enregistre l'élément de type "vehicle" dans la variable ''createdVehicle''
	local createdVehicle = createVehicle(tonumber(vehicleModel),x,y,z)
end
</pre>
<p>Avec cette variable, on pourrait faire pas mal de choses sympa, mais ici nous allons juste vérifier si le véhicule à bien été créé ou non. 
Sur le wiki de la fonction <a href="../CreateVehicle.html" title="CreateVehicle">createVehicle</a>, il y a la partie nommée <b>Returns</b>, la fonction va retourner <i>false</i> si la voiture n'a pas été créé. Du coups, on va regarder la valeur de la variable <i>createdVehicle</i>.
</p><p>Voilà notre code complet:
</p>
<pre class="prettyprint lang-lua">
function createVehicleForPlayer(thePlayer, command, vehicleModel)
	local x,y,z = getElementPosition(thePlayer) -- On prent la position du joueur qui a tapé la commande
	x = x + 5 -- on ajoute 5 unités à x
	local createdVehicle = createVehicle(tonumber(vehicleModel),x,y,z) -- on crée le véhicule demandé par le joueur et on récupère ce que nous retourne la fonction dans la variable createdVehicle
	-- On vérifie si la valeur retournée est égal à ''false'' ( ce qui signifie que ça n'a pas marché )
	if (createdVehicle == false) then
		-- si c'est le cas, on affiche un message d'erreur dans la chatbox mais seulement pour le joueur.
		outputChatBox("Erreur lors de la création du véhicule.",thePlayer)
	end
end
addCommandHandler("createVehicle", createVehicleForPlayer)
</pre>
<p>Comme vous pouvez le voir, nous avons utilisé une nouvelle fonction: <a href="../OutputChatBox.html" title="OutputChatBox">outputChatBox</a>. Vous devriez maintenant pouvoir regarder la description de cette fonction par vous même.
</p>
<h2><span class="mw-headline" id="Ce_que_vous_devez_savoir">Ce que vous devez savoir</span></h2>
<p>Vous avez déjà lu quelques informations sur les ressources, les commandes et trouvez des fonctions dans le wiki, mais il y a encore beaucoup à apprendre. Cette section vous donnera une vue d'ensemble plutôt courte sur certaines de ces choses, tout en regardant les pages du wiki si possible.
</p>
<h3><span class="mw-headline" id="Les_scripts_client_et_serveur">Les scripts client et serveur</span></h3>
<p>Vous pouvez avoir déjà remarqué ces termes (serveur/client) quelque part sur ce wiki, le plus souvent pour les fonctions. MTA ne supporte pas seulement les scripts exécuté par le serveur et des commandes (comme celle que l'on vient de faire) ou d'autres fonctions, mais aussi les scripts exécute par le client MTA, ceux des joueurs qui se connecte au serveur. La raison est que certaines fonctions de MTA doit être du coté client comme par exemple le GUI - Graphical User Interface - ( Pour tout ce qui est fenêtres, boutons, etc ), d'autres devraient être du côté client parce qu'ils fonctionnent mieux mais d'autres sont mieux pensées pour être du côté serveur ou ne fonctionne tout simplement pas du côté client.
</p><p>La plupart de vos scripts (gamemodes, maps) seront surement du côté serveur, comme celui que nous avons fait tout à l'heure. Si vous vous heurtez à quelque chose qui ne peut pas être résolu du côté serveur, vous devrez probablement le faire côté client. Pour un script client, vous devriez créer un script ordinaire (par exemple appelé <i>client.lua</i>) et spécifié dans la meta.xml, comme ceci:
</p>
<pre class="prettyprint lang-xml">
&lt;script src="client.lua" type="client" /&gt;
</pre>
<p>L'attribut <i>type</i> est par defaut 'server', donc nous avons juste besoin de spécifier que c'est un script client. Lorsque vous faites ceci, le fichier va être télécharger par le joueur sur son ordinateur lorsqu'il se connecte au serveur. Plus d'infos: <a href="../Client_side_scripts.html" title="Client side scripts">Client side scripts</a>.
</p>
<h3><span class="mw-headline" id="Ressources_plus_complexes">Ressources plus complexes</span></h3>
<p>La section précédente nous a montré brièvement comment ajouter des scripts clients à la ressource. Penchons nous maintenant sur la <i>meta.xml</i> et ce qu'elle fait.
</p>
<h4><span class="mw-headline" id="Premier_exemple_-_Un_script_utile">Premier exemple - Un script utile</span></h4>
<pre class="prettyprint lang-xml">
/admin_commands
	/meta.xml
	/commands.lua
	/client.lua
</pre>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
	&lt;info author="Someguy" description="admin commands" /&gt;
	&lt;script src="commands.lua" /&gt;
	&lt;script src="client.lua" type="client" /&gt;
&lt;/meta&gt;
</pre>
<ul><li> Le "commands.lua" fournit quelques commandes d'admin, comme le fait d'interdire un joueur, en bannissant ou quelque chose d'autre ce qui peut être utilisé par l'admin du serveur </li>
<li> Le "client.lua" fournit un GUI pour être capable d'exécuter les actions mentionnées facilement </li></ul>
<p>Cet exemple de script doit tourner tout le temps (peut être même démarré en même temps que le serveur) car ces commandes d'admin peuvent être appelé à n'importe quelle moment.
</p>
<h4><span class="mw-headline" id="Second_exemple_-_Un_gamemode">Second exemple - Un gamemode</span></h4>
<pre class="prettyprint lang-xml">
/counterstrike
	/meta.xml
	/counterstrike.lua
	/buymenu.lua
</pre>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
	&lt;info author="Quelqu'un" description="Counterstrike remake" type="gamemode" /&gt;
	&lt;script src="counterstrike.lua" /&gt;
	&lt;script src="buymenu.lua" type="client" /&gt;
&lt;/meta&gt;
</pre>
<ul><li> Le "counterstrike.lua" contient des caractéristiques semblables aux dispositifs suivants&#160;:
<ul><li> Laisser les joueurs choisirent leur équipe et les faire apparaître</li>
<li> Leur fournir des armes, des cibles et des instructions (peut-être lues d'une carte, voir ci-dessous)</li>
<li> Définir les règles du jeu, par exemple. La partie se finie, ce qui se produit quand un joueur meurt</li>
<li> .. et peut-être encore plus</li></ul></li>
<li> Le "buymenu.lua" est un script du côté client et crée un menu pour acheter des armes</li></ul>
<p>Cet exemple peut s'appeler un gamemode, il modifie le gameplay, mais définit réellement les règles de celui-ci. Le "type" attribut indique que cet exemple fonctionne avec <a href="http://wiki.localhost/index.php?title=Map_Manager&amp;action=edit&amp;redlink=1" class="new" title="Map Manager (page does not exist)">Map Manager</a>, encore une autre ressource qui a été écrite par l'équipe de MTA pour contrôler des gamemodes et le chargement de cartes. On recommande fortement que vous basiez vos gamemodes sur les techniques qu'il fournit.
</p><p>Ceci signifie également que ce gamemode ne fonctionnera probablement pas sans carte. Les gamemodes devront toujours être aussi génériques que possible. Un exemple de gamemode utilisant une carte est énoncé dans le prochain exemple.
</p>
<h4><span class="mw-headline" id="Troisi.C3.A8me_exemple_-_Une_carte">Troisième exemple - Une carte</span></h4>
<pre class="prettyprint lang-xml">
/cs-airport
	/meta.xml
	/airport.map
	/airport.lua
</pre>
<pre class="prettyprint lang-xml">
&lt;meta&gt;
	&lt;info author="Quelqu'un" description="Counterstrike airport map" type="map" gamemodes="counterstrike" /&gt;
	&lt;map src="airport.map" /&gt;
	&lt;script src="airport.lua" /&gt;
&lt;/meta&gt;
</pre>
<ul><li> Le "airport.map" dans le fichier XML fournit des informations au sujet de la carte au gamemode, celui-ci peut inclure&#160;:
<ul><li> Là où les joueurs devraient apparaître, avec quelles armes, avec quelle équipe</li>
<li> Ce qui sont les cibles</li>
<li> Temps, heure du monde, Limite de temps</li>
<li> Fournir les véhicules</li></ul></li>
<li> Le <i>airport.lua</i> peut contenir des actions relatifs a la map comme:
<ul><li> Ouvrir une certaine porte ou faire exploser quelque chose quand une autre chose de spécifique se produit</li>
<li> Créer ou déplacer quelques objets faits sur commande, ou manœuvrez les objets qui sont créés dans le fichier .map</li>
<li> .. toutes autre choses relatifs aux objets du .map</li></ul></li></ul>
<p>Comme vous pouvez le voir, l'attribut "type" a été changé en 'map', pour dire au <a href="http://wiki.localhost/index.php?title=Map_Manager&amp;action=edit&amp;redlink=1" class="new" title="Map Manager (page does not exist)">Map Manager</a> que cette ressource est une carte, tandis que l'attribut "gamemodes" indique pour quels gamemodes cette carte est valide, dans ce cas-ci le gamemode de l'exemple de tout à l'heure.
Ce qui peut venir comme une surprise est qu'il y a aussi un script dans la ressource de carte. Évidemment ce n'est pas nécessaire dans une carte, mais ouvre une large gamme de possibilités pour les créateurs de cartes.
</p><p>Le "airport.map" pourrait être semblable à ceci&#160;:
</p>
<pre class="prettyprint lang-xml">
&lt;map mode="deathmatch" version="1.0"&gt;
	&lt;terrorists&gt;
		&lt;spawnpoint posX="2332.23" posY="-12232.33" posZ="4.42223" skins="23-40" /&gt;
	&lt;/terrorists&gt;
	&lt;counterterrorists&gt;
		&lt;spawnpoint posX="2334.23443" posY="-12300.233" posZ="10.2344" skins="40-50" /&gt;
	&lt;/counterterrorists&gt;

	&lt;bomb posX="23342.23" posY="" posZ="" /&gt;
	
	&lt;vehicle posX="" posY="" posZ="" model="602" /&gt;	
	&lt;vehicle posX="" posY="" posZ="" model="603" /&gt;	
&lt;/map&gt;
</pre>
<p>Quand un gamemode est commencé avec une carte, les ressources de carte est automatiquement démarrée par le mapmanager et les renseignements qu'il contient peut être lu par le gamemode. Quand la carte change, la ressource de carte actuelle est arrêtée et la ressource de carte suivante est commencée. Pour une explication plus détaillée et des exemples pour savoir comment les ressources de cartes sont utilisées dans le script principal, visitez s'il vous plaît la page <a href="../Writing_Gamemodes.html" title="Writing Gamemodes">Writing Gamemodes</a>.
</p>
<h3><span class="mw-headline" id=".C3.89v.C3.A9nements">Événements</span></h3>
<p>MTA utilise les événements pour signaler aux scripts que des choses s'est passé dans le jeu. Par exemple quand un joueur meurt, l’événement <a href="../OnPlayerWasted.html" title="OnPlayerWasted">onPlayerWasted</a> est déclenché. Pour exécuter n'importe quelle action quand un joueur meurt, votre script doit donner le nom de sa fonction à exécuter lorsque cet événement est déclenché par MTA grâce à la fonction <a href="../AddEventHandler.html" title="AddEventHandler">addEventHandler</a>. C'est très similaire à la fonction qui permet de déclencher une fonction via une commande.
</p><p>Cet exemple produira un message avec le nom du joueur qui est mort&#160;: 
</p>
<pre class="prettyprint lang-lua">
function playerDied(totalAmmo, killer, killerWeapon, bodypart)
	outputChatBox(getPlayerName(source).." died!")
end
addEventHandler("onPlayerWasted", getRootElement(), playerDied)
</pre>
<p>Au lieu de lister les arguments qui sont nécessaires, la page de documentation pour un événement indique quels paramètres sont passés à la fonction que vous attachez à cet événement. Un autre point important est la variable "source", qui existe dans les fonction d’événement. Il ne doit pas être ajoutés à la liste des paramètres de la fonction, mais elle existe quand même à l'intérieur de votre fonction. Cette variable a une valeur différente d'un événement à l'autre, pour les événements de joueurs (comme dans l'exemple au-dessus) c'est le joueur responsable de son déclenchement. Comme autre exemple, vous pouvez jeter un coup d'œil au script qui permet de faire apparaître le joueur dans la première section pour avoir une idée de comment utiliser cette variable "source".
</p>
<h2><span class="mw-headline" id="O.C3.B9_aller_d.27ici">Où aller d'ici</span></h2>
<p>Vous devriez maintenant être familier avec les aspects les plus fondamentaux du scripting sur MTA et aussi un peu avec la documentation. Le <a href="../Main_Page.html" title="Main Page">Main_Page</a> vous fournit des liens vers plus de renseignements, tutoriels et Références qui permettent de se plonger plus profondément dans les thèmes que vous désirez apprendre.
</p><p>D'ici nous recommandons de lire les tutos sur le <a href="../Debugging.html" title="Debugging">debugging</a>. Les bonnes pratiques pour débuguer vos scripts sont une nécessité absolue quand vous faites des scripts.
</p>
<!-- 
NewPP limit report
Cached time: 20190629062416
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.010 seconds
Real time usage: 0.010 seconds
Preprocessor visited node count: 234/1000000
Preprocessor generated node count: 448/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key mta_wiki-wiki_dev_:pcache:idhash:6171-0!*!0!!en!*!* and timestamp 20190629062416 and revision id 56176
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.multitheftauto.com/index.php?title=FR/Introduction_Programmation&amp;oldid=56176">https://wiki.multitheftauto.com/index.php?title=FR/Introduction_Programmation&amp;oldid=56176</a>"</div>
					<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="Introduction_Programmation.html" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://wiki.localhost/index.php?title=Talk:FR/Introduction_Programmation&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="http://wiki.localhost/index.php?title=FR/Introduction_Programmation&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://wiki.localhost/index.php?title=FR/Introduction_Programmation&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://wiki.localhost/index.php?title=Special:CreateAccount&amp;returnto=FR%2FIntroduction+Programmation" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://wiki.localhost/index.php?title=Special:UserLogin&amp;returnto=FR%2FIntroduction+Programmation" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../Main_Page.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Home"><a href="../Main_Page.html">Home</a></li>
											<li id="n-How-you-can-help"><a href="../How_you_can_help.html">How you can help</a></li>
											<li id="n-recentchanges"><a href="../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.multitheftauto.com/wiki/OnDgsDestroy" title="Load a random page [x]" accesskey="x">Random page</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-reference" role="navigation">
		<h3>reference</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Client-Functions"><a href="../Client_Scripting_Functions.html">Client Functions</a></li>
											<li id="n-Client-Events"><a href="../Client_Scripting_Events.html">Client Events</a></li>
											<li id="n-Server-Functions"><a href="../Server_Scripting_Functions.html">Server Functions</a></li>
											<li id="n-Server-Events"><a href="../Server_Scripting_Events.html">Server Events</a></li>
											<li id="n-Shared-Functions"><a href="../Shared_Scripting_Functions.html">Shared Functions</a></li>
											<li id="n-Useful-Functions"><a href="../Useful_Functions.html">Useful Functions</a></li>
											<li id="n-MTA-Classes"><a href="../MTA_Classes.html">MTA Classes</a></li>
											<li id="n-MTA-Elements"><a href="../Element.html">MTA Elements</a></li>
											<li id="n-Element-Tree"><a href="../Element_tree.html">Element Tree</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.localhost/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Multi Theft Auto: Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="../Special_WhatLinksHere/FR/Introduction_Programmation.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="../Special_RecentChangesLinked/FR/Introduction_Programmation.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="http://wiki.localhost/index.php?title=FR/Introduction_Programmation&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="http://wiki.localhost/index.php?title=FR/Introduction_Programmation&amp;oldid=56176" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="http://wiki.localhost/index.php?title=FR/Introduction_Programmation&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
				<div id="p-lang" class="portlet" role="navigation">
				<h3>In other languages</h3>

				<div class="pBody">
					<ul>
													<li class="interlanguage-link interwiki-ru"><a href="http://wiki.multitheftauto.com/index.php?title=RU/Scripting_Introduction" title="Scripting Introduction – русский" lang="ru" hreflang="ru">Русский</a></li>
													<li class="interlanguage-link interwiki-it"><a href="http://wiki.multitheftauto.com/index.php?title=IT/Introduzione_allo_scripting" title="Introduzione allo scripting – italiano" lang="it" hreflang="it">Italiano</a></li>
													<li class="interlanguage-link interwiki-es"><a href="http://wiki.multitheftauto.com/index.php?title=ES/Introducci%C3%B3n_a_la_Programaci%C3%B3n" title="Introducción a la Programación – español" lang="es" hreflang="es">Español</a></li>
											</ul>

									</div>
			</div>
				</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="http://www.gnu.org/copyleft/fdl.html"><img src="../../resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31"/></a>
							</div>
					<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="../../resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 19 July 2018, at 18:37.</li>
									<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
									<li id="privacy"><a href="../Multi_Theft_Auto__Wiki_Privacy_policy.html" title="Multi Theft Auto: Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Multi_Theft_Auto__Wiki_About.html" title="Multi Theft Auto: Wiki:About">About Multi Theft Auto: Wiki</a></li>
									<li id="disclaimer"><a href="../Multi_Theft_Auto__Wiki_General_disclaimer.html" title="Multi Theft Auto: Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.GoogleCodePrettify"]);});</script>
<script src="../../extensions/_MTAThemeExtensions/main11b9.js?303"></script><script src="../../extensions/_MTAThemeExtensions/topmenu11b9.js?303"></script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":34});});</script></body></html>
