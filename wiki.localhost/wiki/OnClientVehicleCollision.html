<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>OnClientVehicleCollision - Multi Theft Auto: Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"OnClientVehicleCollision","wgTitle":"OnClientVehicleCollision","wgCurRevisionId":61987,"wgRevisionId":61987,"wgArticleId":6040,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Client events","Functions and events with issues"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"OnClientVehicleCollision","wgRelevantArticleId":6040,"wgRequestId":"2fa52c9e7758ef8b213af6ef","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":false,"dialogs":false,"preview":false,"publish":false}});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook"/>
<script async="" src="http://wiki.localhost/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.5"/>
<link rel="shortcut icon" href="http://wiki.localhost/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.localhost/opensearch_desc.php" title="Multi Theft Auto: Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.multitheftauto.com/api.php?action=rsd"/>
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html"/>
<link rel="alternate" type="application/atom+xml" title="Multi Theft Auto: Wiki Atom feed" href="http://wiki.localhost/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<meta name='headingclass' content='' data-class='client' data-subcaption='Clientside event'>
<meta name='lowercasetitle' content=''>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-OnClientVehicleCollision rootpage-OnClientVehicleCollision skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">OnClientVehicleCollision</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Multi Theft Auto: Wiki</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><!--HC-->
<!--LC-->
</p><p>This event is triggered when a vehicle collides with an <a href="Element.html" title="Element">element</a> or a world object.
</p><p>Note that the collision reported by this event doesn't always damage the vehicle by default (this event triggers when hitting lamp posts, but the vehicle isn't damaged by them automatically, for example). If you want to deal with real damage, please refer to <a href="OnClientVehicleDamage.html" title="OnClientVehicleDamage">onClientVehicleDamage</a>.
</p>
<table cellspacing="0" style="padding: 5px; width: 80%; margin: 2px auto 2px auto; border: 1px solid #BFBFFF; background: #E0E0FF; border-left: 10px solid #BFBFFF;">
<tr>
<td style="width: 32px; vertical-align:top; display: none;" rowspan="2"> [[{{{image}}}|link=]]
</td>
<td style=""> <b>Note:</b> This event is only triggered for vehicles that are streamed in
</td></tr>
<tr>
<td rowspan="1" style="padding-left: 10px;">
</td></tr></table>
<h2><span class="mw-headline" id="Parameters">Parameters</span></h2>
<pre class="prettyprint lang-lua">
element theHitElement, float force, int bodypart, float collisionX, float collisionY, float collisionZ, float normalX, float normalY, float normalZ, float hitElementForce, int model
</pre>
<p><b>Note:</b> <i>theHitElement</i> will be nil or false if it's a default SA object and it will trigger twice for vehicles because one vehicle hit another and one got hit by another.
</p>
<ul><li><b>theHitElement:</b> the other entity, or nil if the vehicle collided with the world</li>
<li><b>force:</b> the impact magnitude (Note: this is NOT the damage it is a force value which is then multiplied by the vehicles collision damage multiplier. for an example of this see below) </li>
<li><b>bodyPart:</b> the bodypart that hit the other element</li></ul>
<div style="border:3px solid red;margin-bottom:3px;padding-left:5px;"><div style="float:right;padding-right:5px;font-weight:bold;"></div>
<ul><li><b>0:</b> Frame</li>
<li><b>2:</b> Trunk </li>
<li><b>3:</b> Hood</li>
<li><b>4:</b> Rear</li>
<li><b>5:</b> Front left door</li>
<li><b>6:</b> Front right door</li>
<li><b>7:</b> Rear left door</li>
<li><b>8:</b> Rear right door</li>
<li><b>13:</b> Front Left tyre</li>
<li><b>14:</b> Front Right tyre</li>
<li><b>15:</b> Back Left tyre</li>
<li><b>16:</b> Back Right tyre</li></ul>
<p>(Other potential IDs haven't been documented yet and might depend on vehicle model)
</p>
</div>
<ul><li><b>collisionX/Y/Z:</b> the position the collision took place</li>
<li><b>normalX/Y/Z:</b> the surface normal of the hit object</li>
<li><b>hitElementforce:</b> 0 for non vehicles or the force of the other vehicle</li>
<li><b>model:</b> model of the hit element (useful to detect building collisions as hitElement will be nil)</li></ul>
<h2><span class="mw-headline" id="Type">Type</span></h2>
<p>This event is a pre reaction event meaning it occurs before any game level reaction to the collision which include:
</p>
<ul><li> Bike knock off effect</li>
<li> Collision particles</li>
<li> All types of damage reaction such as broken wings, wind shields, engine damage, broken lights and so on</li>
<li> Audio of the impact</li></ul>
<h2><span class="mw-headline" id="Source">Source</span></h2>
<p>The source of this event is the vehicle that collided with something.
</p>
<h2><span class="mw-headline" id="Issues">Issues</span></h2>
<table class="wikitable sortable" style="width: auto; table-layout: fixed;">

<tr>
<th> Issue ID
</th>
<th class="unsortable"> Description
</th></tr>

<tr>
<td><a rel="nofollow" class="external text" href="https://bugs.mtasa.com/view.php?id=7422">#7422</a>
</td>
<td>onClientVehicleCollision doesnt trigger when hitting some frozen objects
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://bugs.mtasa.com/view.php?id=8265">#8265</a>
</td>
<td>(Fixed in r14744) onClientVehicleCollision doesn't trigger for planes, trains and boats
</td></tr>

</table>
<h2><span class="mw-headline" id="Example">Example</span></h2>
<pre class="prettyprint lang-lua">
addEventHandler("onClientVehicleCollision", root,
    function(collider,force, bodyPart, x, y, z, nx, ny, nz)
         if ( source == getPedOccupiedVehicle(localPlayer) ) then
             -- force does not take into account the collision damage multiplier (this is what makes heavy vehicles take less damage than banshees for instance) so take that into account to get the damage dealt
             local fDamageMultiplier = getVehicleHandling(source).collisionDamageMultiplier
             -- Create a marker (Scaled down to 1% of the actual damage otherwise we will get huge markers)
             local m = createMarker(x, y, z, "corona", force * fDamageMultiplier * 0.01, 0, 9, 231)
             -- Destroy the marker in 2 seconds
             setTimer(destroyElement, 2000, 1, m)
         end
    end
)

</pre>
<pre class="prettyprint lang-lua">
-- This code works because onClientVehicleCollision is triggered before any SA reaction to the collision, therefore we can update the knocked off bike status just before the collision and stop the falling off effect happening&#160;:)
addEventHandler("onClientVehicleCollision", root,
    function ( hit ) 
        -- firstly did we trigger this event
        if ( source == getPedOccupiedVehicle(localPlayer) ) then
            -- knock off defaults to false
            local knockOff = false 
            -- if our hit element is nil (we just hit an SA map object)
            if ( hit == nil ) then 
                -- set knockOff to true 
                knockOff = true 
            end 
  
            -- update our can be knocked off bike status accordingly
            setPedCanBeKnockedOffBike(localPlayer, knockOff) 
        end
    end
)

</pre>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<h3><span class="mw-headline" id="Client_vehicle_events">Client vehicle events</span></h3>
<ul><li><a href="OnClientTrailerAttach.html" title="OnClientTrailerAttach">onClientTrailerAttach</a></li>
<li><a href="OnClientTrailerDetach.html" title="OnClientTrailerDetach">onClientTrailerDetach</a></li>
<li><strong class="selflink">onClientVehicleCollision</strong></li>
<li><a href="OnClientVehicleDamage.html" title="OnClientVehicleDamage">onClientVehicleDamage</a></li>
<li><a href="OnClientVehicleEnter.html" title="OnClientVehicleEnter">onClientVehicleEnter</a></li>
<li><a href="OnClientVehicleExit.html" title="OnClientVehicleExit">onClientVehicleExit</a></li>
<li><a href="OnClientVehicleExplode.html" title="OnClientVehicleExplode">onClientVehicleExplode</a></li>
<li><a href="OnClientVehicleNitroStateChange.html" title="OnClientVehicleNitroStateChange">onClientVehicleNitroStateChange</a></li>
<li><a href="OnClientVehicleRespawn.html" title="OnClientVehicleRespawn">onClientVehicleRespawn</a></li>
<li><a href="OnClientVehicleStartEnter.html" title="OnClientVehicleStartEnter">onClientVehicleStartEnter</a></li>
<li><a href="OnClientVehicleStartExit.html" title="OnClientVehicleStartExit">onClientVehicleStartExit</a></li></ul>
<p><br />
</p>
<h3><span class="mw-headline" id="Client_event_functions">Client event functions</span></h3>
<ul><li><a href="AddEvent.html" title="AddEvent">addEvent</a></li>
<li><a href="AddEventHandler.html" title="AddEventHandler">addEventHandler</a></li>
<li><a href="CancelEvent.html" title="CancelEvent">cancelEvent</a></li>
<li><a href="CancelLatentEvent.html" title="CancelLatentEvent">cancelLatentEvent</a></li>
<li><a href="GetEventHandlers.html" title="GetEventHandlers">getEventHandlers</a></li>
<li><a href="GetLatentEventHandles.html" title="GetLatentEventHandles">getLatentEventHandles</a></li>
<li><a href="GetLatentEventStatus.html" title="GetLatentEventStatus">getLatentEventStatus</a></li>
<li><a href="RemoveEventHandler.html" title="RemoveEventHandler">removeEventHandler</a></li>
<li><a href="TriggerEvent.html" title="TriggerEvent">triggerEvent</a></li>
<li><a href="TriggerLatentServerEvent.html" title="TriggerLatentServerEvent">triggerLatentServerEvent</a></li>
<li><a href="TriggerServerEvent.html" title="TriggerServerEvent">triggerServerEvent</a></li>
<li><a href="WasEventCancelled.html" title="WasEventCancelled">wasEventCancelled</a></li></ul>
<p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20190629062337
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.012 seconds
Real time usage: 0.013 seconds
Preprocessor visited node count: 142/1000000
Preprocessor generated node count: 552/1000000
Post‐expand include size: 2960/2097152 bytes
Template argument size: 781/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    7.272      1 - -total
 35.30%    2.567      1 - Template:Note
 26.68%    1.940      1 - Template:MessageBox
 20.76%    1.510      1 - Template:Issues
 11.52%    0.838      2 - Template:Issue
  9.10%    0.662      1 - Template:VehicleParts
  8.62%    0.627      1 - Template:Client_event
  7.33%    0.533      1 - Template:Client_vehicle_events
  7.29%    0.530      1 - Template:Client_event_functions
-->

<!-- Saved in parser cache with key mta_wiki-wiki_dev_:pcache:idhash:6040-0!*!0!!*!*!* and timestamp 20190629062337 and revision id 61987
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.multitheftauto.com/index.php?title=OnClientVehicleCollision&amp;oldid=61987">https://wiki.multitheftauto.com/index.php?title=OnClientVehicleCollision&amp;oldid=61987</a>"</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Client_events.html" title="Category:Client events">Client events</a></li><li><a href="Category_Functions_and_events_with_issues.html" title="Category:Functions and events with issues">Functions and events with issues</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="OnClientVehicleCollision.html" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://wiki.localhost/index.php?title=Talk:OnClientVehicleCollision&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="http://wiki.localhost/index.php?title=OnClientVehicleCollision&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://wiki.localhost/index.php?title=OnClientVehicleCollision&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://wiki.localhost/index.php?title=Special:CreateAccount&amp;returnto=OnClientVehicleCollision" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://wiki.localhost/index.php?title=Special:UserLogin&amp;returnto=OnClientVehicleCollision" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="Main_Page.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Home"><a href="Main_Page.html">Home</a></li>
											<li id="n-How-you-can-help"><a href="How_you_can_help.html">How you can help</a></li>
											<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.multitheftauto.com/wiki/OnDgsDestroy" title="Load a random page [x]" accesskey="x">Random page</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-reference" role="navigation">
		<h3>reference</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Client-Functions"><a href="Client_Scripting_Functions.html">Client Functions</a></li>
											<li id="n-Client-Events"><a href="Client_Scripting_Events.html">Client Events</a></li>
											<li id="n-Server-Functions"><a href="Server_Scripting_Functions.html">Server Functions</a></li>
											<li id="n-Server-Events"><a href="Server_Scripting_Events.html">Server Events</a></li>
											<li id="n-Shared-Functions"><a href="Shared_Scripting_Functions.html">Shared Functions</a></li>
											<li id="n-Useful-Functions"><a href="Useful_Functions.html">Useful Functions</a></li>
											<li id="n-MTA-Classes"><a href="MTA_Classes.html">MTA Classes</a></li>
											<li id="n-MTA-Elements"><a href="Element.html">MTA Elements</a></li>
											<li id="n-Element-Tree"><a href="Element_tree.html">Element Tree</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.localhost/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Multi Theft Auto: Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/OnClientVehicleCollision.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/OnClientVehicleCollision.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="http://wiki.localhost/index.php?title=OnClientVehicleCollision&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="http://wiki.localhost/index.php?title=OnClientVehicleCollision&amp;oldid=61987" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="http://wiki.localhost/index.php?title=OnClientVehicleCollision&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="http://www.gnu.org/copyleft/fdl.html"><img src="../resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31"/></a>
							</div>
					<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="../resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 16 January 2019, at 22:50.</li>
									<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
									<li id="privacy"><a href="Multi_Theft_Auto__Wiki_Privacy_policy.html" title="Multi Theft Auto: Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Multi_Theft_Auto__Wiki_About.html" title="Multi Theft Auto: Wiki:About">About Multi Theft Auto: Wiki</a></li>
									<li id="disclaimer"><a href="Multi_Theft_Auto__Wiki_General_disclaimer.html" title="Multi Theft Auto: Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.GoogleCodePrettify"]);});</script>
<script src="../extensions/_MTAThemeExtensions/main11b9.js?303"></script><script src="../extensions/_MTAThemeExtensions/topmenu11b9.js?303"></script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":39});});</script></body></html>
