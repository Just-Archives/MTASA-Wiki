<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>HU/Scripting the GUI - Tutorial 2 - Multi Theft Auto: Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":true,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"b03cb5fa260f0d1b5358f090","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"HU/Scripting_the_GUI_-_Tutorial_2","wgTitle":"HU/Scripting the GUI - Tutorial 2","wgCurRevisionId":61683,"wgRevisionId":61683,"wgArticleId":10980,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["GUI Tutorials"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"HU/Scripting_the_GUI_-_Tutorial_2","wgRelevantArticleId":10980,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]};
RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","skins.vector.styles.legacy":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.html","ext.GoogleCodePrettify","ext.gadget.ReferenceTooltips","ext.gadget.exlinks","ext.gadget.DotsSyntaxHighlighter","ext.gadget.purgetab","ext.gadget.markblocked"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://wiki.multitheftauto.com/load.php?lang=en&amp;modules=skins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://wiki.multitheftauto.com/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="generator" content="MediaWiki 1.38.2"/>
<meta name="format-detection" content="telephone=no"/>
<link href="https://wiki.multitheftauto.com/extensions/_MTAThemeExtensions/custom.css" rel="stylesheet"/>
<link rel="shortcut icon" href="https://wiki.multitheftauto.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.multitheftauto.com/opensearch_desc.php" title="Multi Theft Auto: Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.multitheftauto.com/api.php?action=rsd"/>
<link rel="license" href="https://www.gnu.org/licenses/fdl-1.3.html"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-HU_Scripting_the_GUI_-_Tutorial_2 rootpage-HU_Scripting_the_GUI_-_Tutorial_2 skin-vector action-view skin-vector-legacy"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">HU/Scripting the GUI - Tutorial 2</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Multi Theft Auto: Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p><b>Scripting the GUI - Tutorial 2 (Gates and Keypads)</b>
</p><p>Ebben a tutoriálban meg fogjuk nézni a GUI keypad létrehozását egy kombinációs kód használatával a map által meghatározott kapu objecthez.
We will be using serverside keycodes, with some client - server interaction to verify the codes and report the outcome.
</p><p><b>Ne feledje, hogy ez a tutoriál feltételezi azt, hogy tisztában van az <a href="Introduction_to_Scripting_the_GUI.html" title="HU/Introduction to Scripting the GUI">előző tutoriálban</a> bemutatott összes tartalommal</b>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:152px;"><a href="../File_Gui_keypad_tutorial.html" class="image"><img alt="" src="https://wiki.multitheftauto.com/images/4/4e/Gui_keypad_tutorial.png" decoding="async" width="150" height="286" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="../File_Gui_keypad_tutorial.html" class="internal" title="Enlarge"></a></div>GUI Keypad</div></div></div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#A_billentyűzet_létrehozása"><span class="tocnumber">1</span> <span class="toctext">A billentyűzet létrehozása</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#A_GUI_létrehozása"><span class="tocnumber">1.1</span> <span class="toctext">A GUI létrehozása</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#A_kijelző_kezelése"><span class="tocnumber">1.2</span> <span class="toctext">A kijelző kezelése</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#A_klikk_észlelése"><span class="tocnumber">1.3</span> <span class="toctext">A klikk észlelése</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#A_klikk_kezelése"><span class="tocnumber">1.4</span> <span class="toctext">A klikk kezelése</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Szerver_oldal_ellenőrzése"><span class="tocnumber">2</span> <span class="toctext">Szerver oldal ellenőrzése</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#A_keycode_meghatározása"><span class="tocnumber">2.1</span> <span class="toctext">A keycode meghatározása</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#A_kód_megerősítése"><span class="tocnumber">2.2</span> <span class="toctext">A kód megerősítése</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Az_eredmény_megtekintése"><span class="tocnumber">3</span> <span class="toctext">Az eredmény megtekintése</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Az_eredmény_elfogása_és_feldolgozása"><span class="tocnumber">3.1</span> <span class="toctext">Az eredmény elfogása és feldolgozása</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#A_Keypad_alkalmazása"><span class="tocnumber">4</span> <span class="toctext">A Keypad alkalmazása</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#A_kapu_létrehozása"><span class="tocnumber">4.1</span> <span class="toctext">A kapu létrehozása</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#A_keypad_megnyitása"><span class="tocnumber">4.2</span> <span class="toctext">A keypad megnyitása</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#A_kapu_kinyitása"><span class="tocnumber">4.3</span> <span class="toctext">A kapu kinyitása</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Fordította"><span class="tocnumber">5</span> <span class="toctext">Fordította</span></a></li>
</ul>
</div>

<h2><span id="A_billenty.C5.B1zet_l.C3.A9trehoz.C3.A1sa"></span><span class="mw-headline" id="A_billentyűzet_létrehozása">A billentyűzet létrehozása</span></h2>
<p>Kezdésként nyisson meg egy client oldali lua fájlt (ha követte a <a href="Bevezet%c3%a9s_a_scriptel%c3%a9sbe.html" title="HU/Bevezetés a scriptelésbe">bevezetés a scriptelésbe</a> oldalt, akkor ez a gui.lua lesz) amivel majd dolgozni fog.
</p>
<h3><span id="A_GUI_l.C3.A9trehoz.C3.A1sa"></span><span class="mw-headline" id="A_GUI_létrehozása">A GUI létrehozása</span></h3>
<p>Mostanra a GUI létrehozása viszonylag egyenesen előre láthatónak tűnhet, ezért nem fogunk túl nagy részleteiben belemenni.
Ahogy az <a href="Scripting_the_GUI_-_Tutorial_1.html" title="HU/Scripting the GUI - Tutorial 1">előző tutoriálban</a> is, itt is <b>absolute</b> értékeket fogunk használni.
</p>
<pre class="prettyprint lang-lua">function createKeypad()
	-- get the screen width and height
	local sWidth, sHeight = guiGetScreenSize()

	-- create the window, using some maths to find the centre of the screen
	local Width,Height = 142,276
	local X = (sWidth/2) - (Width/2)
	local Y = (sHeight/2) - (Height/2)
	keypadWindow = guiCreateWindow(X,Y,Width,Height,"Keypad",false)
	
	-- don't allow people to resize the keypad
	guiWindowSetSizable(keypadWindow,false)

	-- create buttons labeled 0-9, "*", "#", "Enter" and "C" (clear)
	keypadButton1 = guiCreateButton(13,68,37,36,"1",false,keypadWindow)
	keypadButton2 = guiCreateButton(53,68,37,36,"2",false,keypadWindow)
	keypadButton3 = guiCreateButton(93,68,37,36,"3",false,keypadWindow)
	keypadButton4 = guiCreateButton(13,108,37,36,"4",false,keypadWindow)
	keypadButton5 = guiCreateButton(53,108,37,36,"5",false,keypadWindow)
	keypadButton6 = guiCreateButton(93,108,37,36,"6",false,keypadWindow)
	keypadButton7 = guiCreateButton(13,148,37,36,"7",false,keypadWindow)
	keypadButton8 = guiCreateButton(53,148,37,36,"8",false,keypadWindow)
	keypadButton9 = guiCreateButton(93,148,37,36,"9",false,keypadWindow)
	keypadButtonAsterix = guiCreateButton(13,188,37,36,"*",false,keypadWindow)
	keypadButton0 = guiCreateButton(53,188,37,36,"0",false,keypadWindow)
	keypadButtonHash = guiCreateButton(93,188,37,36,"#",false,keypadWindow)
	keypadButtonExit = guiCreateButton(13,228,37,36,"Exit",false,keypadWindow)
	keypadButtonEnter = guiCreateButton(53,228,37,36,"Enter",false,keypadWindow)
	keypadButtonClear = guiCreateButton(93,228,37,36,"Clear",false,keypadWindow)

	-- create a gridlist to act as a backdrop on the kaypad display
	keypadGridlistDisplay = guiCreateGridList(13,25,117,33,false,keypadWindow)
	guiGridListSetSelectionMode(keypadGridlistDisplay,2)
	guiSetAlpha(keypadGridlistDisplay,0.6)
	-- create a label so we can write text on the keypad display
	keypadLabelDisplay = guiCreateLabel(14,26,115,30,"Enter Keycode.",false,keypadWindow)
	guiLabelSetColor(keypadLabelDisplay,255,000,000)
	guiLabelSetVerticalAlign(keypadLabelDisplay,"center")
	guiLabelSetHorizontalAlign(keypadLabelDisplay,"center",false)
	
	guiSetVisible(keypadWindow,false)
end

-- create the GUI when the resource starts
addEventHandler("onClientResourceStart",getResourceRootElement(getThisResource()),createKeypad)
</pre>
<p>Ahogy azt láthatja, a keypad 10 numerikus billentyűből áll (0-9), két karakterből (* és #), egy törlés gombból, valamint egy bezár és egy indító gombból.
Ez azt jelenti, hogy a keypad-on használt kódok tartalmazhatják ezeket a karaktereket (0123456789*#).
</p>
<h3><span id="A_kijelz.C5.91_kezel.C3.A9se"></span><span class="mw-headline" id="A_kijelző_kezelése">A kijelző kezelése</span></h3>
<p>Kezdjük azzal, hogy egy kis funkciót írunk a keypad kijelzőjének a szabályozására.
Ez megtehető úgy, hogy megírunk egy függvényt amely tartalmaz számos hívást, melyek a szöveg megváltoztatásához szükségesek,
ez lehetővé teszi a számunkra, hogy a későbbiekben könnyedén tudjunk hozzáadni/eltávolítani szövegetek a kijelzőről.
</p>
<pre class="prettyprint lang-lua">function updateDisplay(text)
s	if text then
		-- if its a digit or * or #, then append it to the end of the display
		if tonumber(text) or text == "*" or text == "#" then
			guiSetText(keypadLabelDisplay,guiGetText(keypadLabelDisplay) .. text)
		-- otherwise replace the display with the new text
		else
			guiSetText(keypadLabelDisplay,text)
		end	
	-- if we pass nil, clear the display entirely
	else
		guiSetText(keypadLabelDisplay,"")
	end
end
</pre>
<p>Így egyszerűen meghívhatjuk az updateDisplay-t(our text), hogy megváltoztassa a szöveget a kijelzőn, vagy az updateDisplay(nil)-t, hogy kiürítse azt.
</p>
<h3><span id="A_klikk_.C3.A9szlel.C3.A9se"></span><span class="mw-headline" id="A_klikk_észlelése">A klikk észlelése</span></h3>
<p>Sok gomb van, amelyek hasonló feladatokat végeznek a keypad-on, két módszer áll a rendelkezésünkre, hogy észleljük amikor a játékos rájuk kattint.
</p><p>Hozzáadhatjuk egyenként mindegyik gombhoz az <a href="../OnClientGUIClick.html" title="OnClientGUIClick">onClientGUIClick</a> event-et, ahogy azt az előző tutoriálban is tettük; vagy hozzáadhatunk egy <a href="../OnClientGUIClick.html" title="OnClientGUIClick">onClientGUIClick</a> handler-t az ablakhoz (amely az összes többi keypad GUI elemünk szülője), majd szűrjük az eredményt, hogy csak a kívánt gombokat tartalmazza, és meghívjuk a saját egyedi event-ünket.
</p><p><br />
Ennek a tutoriálnak a céljából, és a többféle megközelítés felvázolása érdekében megnézzük a második módszert is, mindkét megoldás elfogadható.
</p>
<pre class="prettyprint lang-lua">addEventHandler("onClientGUIClick",keypadWindow,processKeypadClicks,true)
</pre>
<p><b>Ne feledje, hogy az utolsó paraméter az 'true'. Ez azt jelenti, hogy a fa ugyanazon ágán lévő bármely elemre való kattintást meghívja ezt a handler-t.</b>
</p><p>Adja hozzá ezt a sort a createKeypad függvényhez, a létrehozott GUI után.
</p><p><br />
Most, hogy az összes kattintást észlelni tudjuk a GUI-nkon, ki kell szűrnünk azt az egyet, amelyiket nem szeretnénk kezelni (azaz: az ablakon vagy a kijelzőn történő kattintást) és hívjuk meg az egyedi event-ünket:
</p>
<pre class="prettyprint lang-lua">function processKeypadClicks(button,state)
	if button == "left" and state == "up" then
		-- if the source of this event is a gui button
		if getElementType(source) == "gui-button" then
			-- trigger our custom event and send the keypad id of this keypad as an argument
			triggerEvent("onKeypadButtonClicked",source,getElementData(keypadWindow,"keypadID"))
		end
	end
end
</pre>
<p>Ahogy azt láthatja, meghívjuk az egyedi "onKeypadButtonClicked" event-ünket, amikor valaki rákattint a gombra a keypad-on.
Also note we use element data "keypadID" to differentiate between keypads. This data will need to be set whenever the player is shown a new keypad.
Erről majd a későbbiekben fogunk részletesen beszélni.
</p>
<h3><span id="A_klikk_kezel.C3.A9se"></span><span class="mw-headline" id="A_klikk_kezelése">A klikk kezelése</span></h3>
<p>Úgy, mint az előző tutoriálban használt <a href="../TriggerServerEvent.html" title="TriggerServerEvent">triggerServerEvent</a>, most meg kell határoznunk az eventet, csak itt most client oldali:
</p>
<pre class="prettyprint lang-lua">addEvent("onKeypadButtonClicked",false)
addEventHandler("onKeypadButtonClicked",root,
	function(keypadID)

	end
)
</pre>
<p>Vegye figyelembe, hogy az <a href="../AddEvent.html" title="AddEvent">addEvent</a> második paramétere false-ra van állítva, jelezve, hogy ezt az eventet nem lehet meghívni a szerverről.
Valamint azt is vegye figyelembe, hogy az <a href="../AddEventHandler.html" title="AddEventHandler">addEventHandler</a>-ben használt függvénynek nincs neve. Ha összevonod és eltávolítot a szóközt, akkor ezt kapot:
</p>
<pre class="prettyprint lang-lua">addEventHandler("onKeypadButtonClicked",root,function() ... end)
</pre>
<p>Ez egyszerűen annyit jelent, hogy ahelyett, hogy a függvény mutatóját egy változóban tároljuk, simán megadjuk mint argumentum.
Ez gyakran tisztábbá teszi a kód átláthatóságát, és könyebbé a mukálatokat.
</p><p>Most, hogy az eventet létrehoztuk, megírhatjuk a kód logikai részét, ami vezérelni fogja a gombunk lenyomását.
</p>
<pre class="prettyprint lang-lua">addEvent("onKeypadButtonClicked",false)
addEventHandler("onKeypadButtonClicked",root,
	function(keypadID)
		-- clear the display if this is the first time its being used
		if guiGetText(keypadLabelDisplay) == "Enter Keycode." or guiGetText(keypadLabelDisplay) == "Invalid Keycode." then
			updateDisplay()
		end
	
	
		-- if its the clear button
		if guiGetText(source) == "Clear" then
			-- clear the display
			updateDisplay()
		
		-- if its the enter button
		elseif guiGetText(source) == "Enter" then
			-- get the currently entered code from the display
			local code = guiGetText(keypadLabelDisplay)
			
			-- if they have entered a code
			if code then
				-- trigger the server so we can verify their code
				triggerServerEvent("verifyKeypadCode",getLocalPlayer(),code,keypadID)
			end
		
		-- if its the exit button
		elseif guiGetText(source) == "Exit" then
			-- hide the keypad and reset the display text ready for next time
			guiSetVisible(keypadWindow,false)
			updateDisplay("Enter Keycode.")
			showCursor(false,false)
			
		-- otherwise, it must be a character button
		else
			updateDisplay(guiGetText(source))	
		end
	end
)
</pre>
<p>Ne feledje, hogy a kijelző törléséhez csak egyszerűen meg kell hívnunk az updateDisplay()-t argumentumok nélkül. Nem kell megadnunk neki a 'nil' értéket, mivel alapértelmezetten az összes paraméter (és a változók) nil.
</p>
<h2><span id="Szerver_oldal_ellen.C5.91rz.C3.A9se"></span><span class="mw-headline" id="Szerver_oldal_ellenőrzése">Szerver oldal ellenőrzése</span></h2>
<p>A tutoriál további részéhez meg kell nyitnia a szerver oldali lua fájlt a resource-ból, amivel majd dolgozni fog.
</p>
<h3><span id="A_keycode_meghat.C3.A1roz.C3.A1sa"></span><span class="mw-headline" id="A_keycode_meghatározása">A keycode meghatározása</span></h3>
<p>Most, hogy befejeztük a keypad-nak a klikkelés részét, tovább kell haladnunk, hogy ellenőrizzük a bevitt kódot a keypad-ba.
Ehhez kelleni fog nekünk a megfelelő kód valahol a szerver oldalon elmentve, amihez majd a játékos kódját tudjuk ellenőrizni.
</p>
<table cellspacing="0" cellpadding="0" style="padding: 5px; padding-left: 12px; padding-right: 12px; border-radius: 10px; width: 60%; margin: 6px auto 2px auto; border: 1px solid #BFBFFF; background: transparent; border-left: 25px solid #BFBFFF;">
<tbody><tr>
<td style="width: 32px; vertical-align:top; display: none;" rowspan="2">[[{{{image}}}|link=|]]
</td>
<td style=""><b>Megjegyzés:</b> Ne tároljon bizalmas adatokat a kliens oldali fájlokban, mint például keycode-okat, vagy jelszavakat. Minden kliens oldali fájlok lementésre kerülnek a játékos számítógépére, és bárki, aki felcsatlakozik a szerverre az képes hozzáférni és olvasni ezeket a fájlokat.
</td></tr>
<tr>
<td rowspan="1" style="padding-left: 10px;">
</td></tr></tbody></table><p><br />
</p><p>Ennek a tutoriálnak a céljából most csak egyszerűen egy szerver oldali táblában fogjuk tárolni a kódot, bár ezt számos módon megteheti (mint például a szerver oldali xml fájlok, vagy MySQL adatbázisok).
</p>
<pre class="prettyprint lang-lua">local keypadCodes = {
	["a51MainGateKeypadCode"] = "4455*#"
}
</pre>
<p>Ez a tábla egy "a51MainGateKeypadCode"-nak nevezett bejegyzést tárol a 4455*# kóddal
</p><p><b>Ez a keycode, amit majd használni fog a kapu kinyitásához a tutoriál későbbi részében.</b>
</p>
<h3><span id="A_k.C3.B3d_meger.C5.91s.C3.ADt.C3.A9se"></span><span class="mw-headline" id="A_kód_megerősítése">A kód megerősítése</span></h3>
<p>Most, hogy van egy keycode-unk, amit ellenőrizni tudunk, megírhatjuk a szerver oldali event-ünket:
</p>
<pre class="prettyprint lang-lua">addEvent("verifyKeypadCode",true)
addEventHandler("verifyKeypadCode",root,function(code,keypadID)
	if code then
		-- using the table we created earlier, check if the code supplied is the same as the code for this gate
		if code == keypadCodes[keypadID] then
			-- if it is, tell the client that it was successful
			triggerClientEvent(client,"onKeypadVerificationSuccessful",client,keypadID)
		else
			-- if it is not, tell the client that it was not successful
			triggerClientEvent(client,"onKeypadVerificationFailed",client,keypadID)
		end
	end
end)
</pre>
<p>Itt használni fogjuk a táblánkat és a játékos által beírt keypadID-t, hogy ellenőrizzük, hogy a kód az egyezik-e.
</p><p>Ha nem használ táblát a kódok tárálásához, akkor ki kell cserélni a 'keypadCodes[keypadID]'-t a saját tárolási módszerével.
Miután sikeres lett az ellenőrzés (vagy nem), meghívhatjuk a kliens oldali szkriptünket, hogy a megfelelő információt jelenítse meg a keypad kijelzőjén.
</p>
<h2><span id="Az_eredm.C3.A9ny_megtekint.C3.A9se"></span><span class="mw-headline" id="Az_eredmény_megtekintése">Az eredmény megtekintése</span></h2>
<p>Ezzel be is befejeztük a tutoriál szerver oldali részét, szóval most meg kell nyitnia a kliens oldali lua fájlt a resource-jából, amivel az előzőekben dolgozott.
</p><p><br />
Miután a kódunk meg lett erősítve, a szerver visszaküldi a választ a kliensnek.
Ugyan úgy, mint a client -&gt; server közötti kommunikációnál, hozzá kell adnunk a klienshez azt az eseményt, amelyet a szerver fog meghívni.
</p>
<h3><span id="Az_eredm.C3.A9ny_elfog.C3.A1sa_.C3.A9s_feldolgoz.C3.A1sa"></span><span class="mw-headline" id="Az_eredmény_elfogása_és_feldolgozása">Az eredmény elfogása és feldolgozása</span></h3>
<p>Először hozzáadunk egy eseményt, ha a megerősítés sikeres:
</p>
<pre class="prettyprint lang-lua">addEvent("onKeypadVerificationSuccessful",true)
addEventHandler("onKeypadVerificationSuccessful",root,
	function()
		-- hide the keypad and reset the display text ready for next time
		guiSetVisible(keypadWindow,false)
		updateDisplay("Enter Keycode.")
		showCursor(false,false)
	end
)
</pre>
<p>Végül hozzáadunk még egy eseményt, ha a megerősítés sikertelen:
</p>
<pre class="prettyprint lang-lua">addEvent("onKeypadVerificationFailed",true)
addEventHandler("onKeypadVerificationFailed",root,
	function()
		-- update the display text to show the code was invalid
		updateDisplay("Invalid Keycode.")
	end
)
</pre>
<p>Ezzel lezárjuk a tutoriál keypad részét.
</p><p>Egy példa arról, hogy hogyan lehet ezt megvalósítani egy működő kapu rendszerben, folytassa a fejezet olvasását.
</p>
<h2><span id="A_Keypad_alkalmaz.C3.A1sa"></span><span class="mw-headline" id="A_Keypad_alkalmazása">A Keypad alkalmazása</span></h2>
<p>A keypad használatához szükségünk lesz valamire, amivel használni tudjuk.
Ehhez a tutoriálhoz kapukat fogunk használni, és ahogyan korábban említettük egy fő kaput fogunk létrehozni az A51-be.
</p>
<h3><span id="A_kapu_l.C3.A9trehoz.C3.A1sa"></span><span class="mw-headline" id="A_kapu_létrehozása">A kapu létrehozása</span></h3>
<p>Mindenek előtt létre kell hoznunk egy kapu objektumot.
Ennek a példának a céljából egy .map fájlt fogunk használni az objektum tárolásához. 
Habár ez egy ajánlott módja az objektumok meghatározásához, nem ez az egyetlen módja, hogy kivitelezzük ezt.
</p><p>Menjen a resource mappához, és hozzon létre egy új fájt gate.map néven, majd adja hozzá ehhez az új fájlhoz a meta.xml-t:
</p>
<pre class="prettyprint lang-lua">&lt;map src="gate.map"/&gt;
</pre>
<p><i>Ha nem biztos a map fájl szintaxisában, kérjük látogassa meg a <a href="Writing_Gamemodes.html" title="HU/Writing Gamemodes">Játékmódok írása</a>, vagy az <a href="Element/Object.html" title="HU/Element/Object">Object</a>-t oldalt a további segítségért.</i>
</p>
<pre class="prettyprint lang-lua">&lt;map&gt;
    &lt;object id="a51MainGateKeypadCode" model="971" posX="96.736" posY="1918.352" posZ="20.694" rotX="0" rotY="0" rotZ="270.40" newPosX="96.751" newPosY="1914.474" newPosZ="20.694" /&gt;
&lt;/map&gt;
</pre>
<p>Ez létrehoz egy kapu objektumot az A51 bejáratánál. Az objektnek most lesz pozíció és tengely körüli forgatás adata, ami a newPosX,newPosY és newPosZ, amivel képesek leszünk mozgatni.
</p><p><b>Ne felejde, hogy az objekt id megegyezik a korábban létrehozott táblázatbejegyzéssel, hogy megtartsa a hozzáférési kódot.</b>
Ez az egyik lehetséges módszer, amelyhez hozzá lehet férni a kapu összekapcsolásához az adott keycode-val.
</p>
<h3><span id="A_keypad_megnyit.C3.A1sa"></span><span class="mw-headline" id="A_keypad_megnyitása">A keypad megnyitása</span></h3>
<p>Térjünk vissza a klisensoldali lua fájlhoz ismét, most már dolgozhatunk a kapu és a keypad összekapcsolásán.
</p><p>Most, hogy a kapunk megvan, kell egy mód, hogy hozzáférjünk a keypadhoz, hogy kinyissa a kaput.
Ennek a tutoriálnak a céljából egy egyszerű parancsot fogunk használni, emellett persze könnyedén használhat colshape-t, vagy gomblenyomást.
</p>
<pre class="prettyprint lang-lua">addCommandHandler("a51gate",function()
	guiSetVisible(keypadWindow,true)
	showCursor(true,true)
	setElementData(keypadWindow,"keypadID","a51MainGateKeypadCode")
end)
</pre>
<p>Vegye figyelembe, hogy beállítottuk az elementdata-t a "keypadID"-re.
Ez nagyon fontos, mert lehetővé teszi a számunkra, hogy nyomon tudjuk követni, hogy melyik kaput próbáljuk kinyitni (ebben az esetben ez a  "a51MainGateKeypadCode" kapu).
</p>
<h3><span id="A_kapu_kinyit.C3.A1sa"></span><span class="mw-headline" id="A_kapu_kinyitása">A kapu kinyitása</span></h3>
<p>A létrehozott kapunkkal és a készenálló keypaddal, már csak annyi maradt hátra, hogy kinyissuk a kaput.
Having created custom events earlier for successfully and unsuccessfully verifying the code, this now becomes very easy to do.
All we do is add an event handler for our custom "success" event, and using the keypadID we defined earlier we can move the gate inside it:
</p>
<pre class="prettyprint lang-lua">addEventHandler("onKeypadVerificationSuccessful",root,
	-- keypadID is sent back from the server
	function(keypadID)
		-- get the gate object (this is where the id="a51MainGateKeypadCode" tag in the map file becomes useful)
		local gate = getElementByID(keypadID)

		-- if we found the object
		if gate then
			-- get the new position (as we defined in the map file)
			local x = tonumber(getElementData(gate,"newPosX"))
			local y = tonumber(getElementData(gate,"newPosY"))
			local z = tonumber(getElementData(gate,"newPosZ"))

			-- move the gate
			moveObject(gate,1500,x,y,z)
			
			-- get the original position
			x = tonumber(getElementData(gate,"posX"))
			y = tonumber(getElementData(gate,"posY"))
			z = tonumber(getElementData(gate,"posZ"))	
			
			-- set a timer to close the gate in 5 seconds
			setTimer(moveObject,5000,1,gate,1500,x,y,z)
		end
	end
)
</pre>
<p>Note how by using the keypadID sent back from the server, we can use if statements and checks against the id to control any number of gates from the same function.
</p><p>You should now have a working example of a GUI Keypad controlling an A51 Gate.
</p><p>Az előző GUI tutoriálokért látogassa meg a <a href="Scripting_the_GUI_-_Tutorial_1.html" title="HU/Scripting the GUI - Tutorial 1">GUI készítése - Tutorial 1 (Gridlists)</a> oldalt <br />
A további GUI tutoriálokért látogassa meg a <a href="Scripting_the_GUI_-_Tutorial_3.html" title="HU/Scripting the GUI - Tutorial 3">GUI készítése - Tutorial 3 (Scrolling News Feed)</a> oldalt
</p>
<h2><span id="Ford.C3.ADtotta"></span><span class="mw-headline" id="Fordította">Fordította</span></h2>
<pre><b>2018.11.26.</b> <font size="3"><b><a rel="nofollow" class="external text" href="../User_Surge.html">Surge</a></b></font>
</pre>
<!-- 
NewPP limit report
Cached time: 20220727034608
Cache expiry: 86400
Reduced expiry: false
Complications: []
CPU time usage: 0.014 seconds
Real time usage: 0.015 seconds
Preprocessor visited node count: 173/1000000
Post‐expand include size: 1737/2097152 bytes
Template argument size: 920/2097152 bytes
Highest expansion depth: 6/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 7524/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.033      1 -total
100.00%    2.033      1 Template:Note_hu
 56.08%    1.140      1 Template:MessageBox
-->

<!-- Saved in parser cache with key wiki-wiki_dev_:pcache:idhash:10980-0!canonical and timestamp 20220727034608 and revision id 61683. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://wiki.multitheftauto.com/index.php?title=HU/Scripting_the_GUI_-_Tutorial_2&amp;oldid=61683">https://wiki.multitheftauto.com/index.php?title=HU/Scripting_the_GUI_-_Tutorial_2&amp;oldid=61683</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../Category_GUI_Tutorials.html" title="Category:GUI Tutorials">GUI Tutorials</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<label id="p-personal-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-createaccount" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=Special:CreateAccount&amp;returnto=HU%2FScripting+the+GUI+-+Tutorial+2" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=Special:UserLogin&amp;returnto=HU%2FScripting+the+GUI+-+Tutorial+2" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu vector-menu-tabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<label id="p-namespaces-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Namespaces</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="Scripting_the_GUI_-_Tutorial_2.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=Talk:HU/Scripting_the_GUI_-_Tutorial_2&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox" aria-labelledby="p-variants-label" />
	<label id="p-variants-label" aria-label="Change language variant" class="vector-menu-heading">
		<span class="vector-menu-heading-label">English</span>
			<span class="vector-menu-checkbox-expanded">expanded</span>
			<span class="vector-menu-checkbox-collapsed">collapsed</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu vector-menu-tabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<label id="p-views-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Views</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="Scripting_the_GUI_-_Tutorial_2.html"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=HU/Scripting_the_GUI_-_Tutorial_2&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=HU/Scripting_the_GUI_-_Tutorial_2&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options"
	 >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox" aria-labelledby="p-cactions-label" />
	<label id="p-cactions-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">More</span>
			<span class="vector-menu-checkbox-expanded">expanded</span>
			<span class="vector-menu-checkbox-collapsed">collapsed</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://wiki.multitheftauto.com/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search Multi Theft Auto: Wiki" aria-label="Search Multi Theft Auto: Wiki" autocapitalize="sentences" title="Search Multi Theft Auto: Wiki [f]" accesskey="f" id="searchInput"
				/>
				<input type="hidden" name="title" value="Special:Search"/>
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search" />
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go" />
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="../Main_Page.html"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<label id="p-navigation-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Navigation</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Home" class="mw-list-item"><a href="../Main_Page.html"><span>Home</span></a></li><li id="n-How-you-can-help" class="mw-list-item"><a href="../How_you_can_help.html"><span>How you can help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="../Special_RecentChanges.html" icon="recentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li><li id="n-randompage" class="mw-list-item"><a href="../DgsGridListSetItemSelectable.html" icon="die" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-Reference" class="mw-portlet mw-portlet-Reference vector-menu vector-menu-portal portal" aria-labelledby="p-Reference-label" role="navigation" 
	 >
	<label id="p-Reference-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Reference</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Client-Functions" class="mw-list-item"><a href="../Client_Scripting_Functions.html"><span>Client Functions</span></a></li><li id="n-Client-Events" class="mw-list-item"><a href="../Client_Scripting_Events.html"><span>Client Events</span></a></li><li id="n-Server-Functions" class="mw-list-item"><a href="../Server_Scripting_Functions.html"><span>Server Functions</span></a></li><li id="n-Server-Events" class="mw-list-item"><a href="../Server_Scripting_Events.html"><span>Server Events</span></a></li><li id="n-Shared-Functions" class="mw-list-item"><a href="../Shared_Scripting_Functions.html"><span>Shared Functions</span></a></li><li id="n-Useful-Functions" class="mw-list-item"><a href="../Useful_Functions.html"><span>Useful Functions</span></a></li><li id="n-MTA-Classes" class="mw-list-item"><a href="../MTA_Classes.html"><span>MTA Classes</span></a></li><li id="n-MTA-Elements" class="mw-list-item"><a href="../Element.html"><span>MTA Elements</span></a></li><li id="n-Element-Tree" class="mw-list-item"><a href="../Element_tree.html"><span>Element Tree</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<label id="p-tb-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="../Special_WhatLinksHere/HU/Scripting_the_GUI_-_Tutorial_2.html" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="../Special_RecentChangesLinked/HU/Scripting_the_GUI_-_Tutorial_2.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=HU/Scripting_the_GUI_-_Tutorial_2&amp;oldid=61683" title="Permanent link to this revision of the page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=HU/Scripting_the_GUI_-_Tutorial_2&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-lang" class="mw-portlet mw-portlet-lang vector-menu vector-menu-portal portal" aria-labelledby="p-lang-label" role="navigation" 
	 >
	<label id="p-lang-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">In other languages</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li class="interlanguage-link interwiki-en mw-list-item"><a href="http://wiki.multitheftauto.com/index.php?title=Scripting_the_GUI_-_Tutorial_2" title="Scripting the GUI - Tutorial 2 – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li></ul>
		
	</div>
</nav>

</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 15 December 2018, at 20:58.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/licenses/fdl-1.3.html">GNU Free Documentation License 1.3</a> unless otherwise noted.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="../Multi_Theft_Auto__Wiki_Privacy_policy.html" title="Multi Theft Auto: Wiki:Privacy policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../Multi_Theft_Auto__Wiki_About.html" title="Multi Theft Auto: Wiki:About">About Multi Theft Auto: Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="../Multi_Theft_Auto__Wiki_General_disclaimer.html" title="Multi Theft Auto: Wiki:General disclaimer">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/licenses/fdl-1.3.html"><img src="https://wiki.multitheftauto.com/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3" width="88" height="31" loading="lazy"/></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="https://wiki.multitheftauto.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script src="https://wiki.multitheftauto.com/extensions/_MTAThemeExtensions/main.js"></script><script src="https://wiki.multitheftauto.com/extensions/_MTAThemeExtensions/topmenu.js"></script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.014","walltime":"0.015","ppvisitednodes":{"value":173,"limit":1000000},"postexpandincludesize":{"value":1737,"limit":2097152},"templateargumentsize":{"value":920,"limit":2097152},"expansiondepth":{"value":6,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":7524,"limit":5000000},"timingprofile":["100.00%    2.033      1 -total","100.00%    2.033      1 Template:Note_hu"," 56.08%    1.140      1 Template:MessageBox"]},"cachereport":{"timestamp":"20220727034608","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":91});});</script>
</body>
</html>