<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>ES/Introducción a la Programación de GUI - Multi Theft Auto: Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":true,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"a49a5076fa52b8f28c1f9872","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"ES/Introducción_a_la_Programación_de_GUI","wgTitle":"ES/Introducción a la Programación de GUI","wgCurRevisionId":39272,"wgRevisionId":39272,"wgArticleId":5916,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["GUI Tutorials"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"ES/Introducción_a_la_Programación_de_GUI","wgRelevantArticleId":5916,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],
"wgRestrictionMove":[]};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","skins.vector.styles.legacy":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.html","ext.GoogleCodePrettify","ext.gadget.ReferenceTooltips","ext.gadget.exlinks","ext.gadget.DotsSyntaxHighlighter","ext.gadget.purgetab","ext.gadget.markblocked"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://wiki.multitheftauto.com/load.php?lang=en&amp;modules=skins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://wiki.multitheftauto.com/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="generator" content="MediaWiki 1.38.2"/>
<meta name="format-detection" content="telephone=no"/>
<link href="https://wiki.multitheftauto.com/extensions/_MTAThemeExtensions/custom.css" rel="stylesheet"/>
<link rel="shortcut icon" href="https://wiki.multitheftauto.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.multitheftauto.com/opensearch_desc.php" title="Multi Theft Auto: Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.multitheftauto.com/api.php?action=rsd"/>
<link rel="license" href="https://www.gnu.org/licenses/fdl-1.3.html"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ES_Introducción_a_la_Programación_de_GUI rootpage-ES_Introducción_a_la_Programación_de_GUI skin-vector action-view skin-vector-legacy"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">ES/Introducción a la Programación de GUI</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Multi Theft Auto: Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p>Una importante caracteristica de MTA:SA es la posibilidad de programar GUIs propias (Graphics User Interface que traducido seria, Interfaz Grafica del Usuario). Una GUI consiste en ventanas, botones, cajas de edición, entre otras cosas.... Estos pueden ser mostrados mientras el jugador esta en el juego, y es usado para tener interacción con el usuario en lugar de los típicos comandos.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="../File_AdminGUI.html" class="image"><img alt="" src="https://wiki.multitheftauto.com/images/thumb/2/2f/AdminGUI.png/300px-AdminGUI.png" decoding="async" width="300" height="240" class="thumbimage" srcset="/images/thumb/2/2f/AdminGUI.png/450px-AdminGUI.png 1.5x, /images/thumb/2/2f/AdminGUI.png/600px-AdminGUI.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="../File_AdminGUI.html" class="internal" title="Enlarge"></a></div>Consola de Administración</div></div></div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Un_tutorial_para_hacer_una_ventana_de_ingreso"><span class="tocnumber">1</span> <span class="toctext">Un tutorial para hacer una ventana de ingreso</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Dibujando_la_ventana"><span class="tocnumber">1.1</span> <span class="toctext">Dibujando la ventana</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Relativo_y_absoluto"><span class="tocnumber">1.2</span> <span class="toctext">Relativo y absoluto</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Añadiendo_los_componentes"><span class="tocnumber">1.3</span> <span class="toctext">Añadiendo los componentes</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Uso_de_la_función_anterior"><span class="tocnumber">1.4</span> <span class="toctext">Uso de la función anterior</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Scripteando_el_boton"><span class="tocnumber">2</span> <span class="toctext">Scripteando el boton</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Detectando_el_click"><span class="tocnumber">2.1</span> <span class="toctext">Detectando el click</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Administrar_el_clic"><span class="tocnumber">2.2</span> <span class="toctext">Administrar el clic</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Triggering_el_server"><span class="tocnumber">2.3</span> <span class="toctext">Triggering el server</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Crear_el_evento_serverside"><span class="tocnumber">2.4</span> <span class="toctext">Crear el evento serverside</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Logging_in"><span class="tocnumber">2.5</span> <span class="toctext">Logging in</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Un_tutorial_para_hacer_una_ventana_de_ingreso">Un tutorial para hacer una ventana de ingreso</span></h2>
<p>En este tutorial nosotros haremos una simple ventana de ingreso, con dos cajas de edición y un botón. La ventana aparecerá cuando el jugador ingrese al juego, y cuando el botón sea apretado, el jugador aparecerá. El tutorial continuara el modo que hicimos en <a href="Introducci%c3%b3n_a_Lua.html" title="ES/Introducción a Lua">Introducción a LUA</a> <i>(Si tu continuaste de la pagina anterior, tendrás que remover o comentar la linea donde se encuentra la función <a href="../SpawnPlayer.html" title="SpawnPlayer">spawnPlayer</a>, porque estaremos reemplazando eso con una GUI alternativa en este tutorial)</i>. También daremos una mirada a lo que es la programación en el cliente.
</p>
<h3><span class="mw-headline" id="Dibujando_la_ventana">Dibujando la ventana</span></h3>
<p>Toda GUI se debe hacer en el cliente. Esto tambien es una buena practica para tener todos los archivos de cliente en carpetas separadas.
</p><p>Busca el directorio /Tu servidor MTA/mods/deathmatch/resources/myserver/, y crea una carpeta llamada "cliente". En la carpeta cliente, crea un archivo de texto y llamalo "gui.lua". 
</p><p>En este archivo escribiremos una función que dibuje la ventana. Para crear la ventana usaremos <a href="../GuiCreateWindow.html" title="GuiCreateWindow">guiCreateWindow</a>:
</p>
<pre class="prettyprint lang-lua">function createLoginWindow()
	-- definimos las coordenadas X,Y donde se creara la ventana
	local X = 0.375
	local Y = 0.375
	-- definimos el tamaño de la ventana (El ancho y el alto)
	local Width = 0.25
	local Height = 0.25
	-- Creamos la ventana y la grabamos su valor de elemento en la variable 'wdwLogin'
	-- Apreta en el nombre de la función para leer su definición
	wdwLogin = guiCreateWindow(X, Y, Width, Height, "Porfavor ingrese", true)
end
</pre>
<h3><span class="mw-headline" id="Relativo_y_absoluto">Relativo y absoluto</span></h3>
<p>Notese que el argumento final pasado a la función <a href="../GuiCreateWindow.html" title="GuiCreateWindow">guiCreateWindow</a> en el ejemplo de arriba es <i>true</i>. Esto indica que las coordenadas y las dimensiones de la ventana son <b>relativas</b>, queriendo decir que son un <i>porcentaje</i> del tamaño total de la pantalla. Queriendo decir que el lado izquierdo de la pantalla es 0 y el lado derecho es 1. Una posición X de 0.5, representaría el centro de la pantalla. Similarmente, si la parte de arriba de la pantalla es 0 y la de abajo es 1, entonces una posición en Y de 0.2 seria un 20% abajo de la pantalla. Este mismo principio se aplica al ancho y alto también. (Con un ancho de 0.5, quiere decir que la ventana tendrá un ancho de la mitad de la pantalla) 
</p><p>La alternativa a usar valores relativos es usar <b>absolutos</b> (Pasando <i>false</i> en vez de true a <a href="../GuiCreateWindow.html" title="GuiCreateWindow">guiCreateWindow</a>)). Los valores absolutos son calculados como el numero total de pixeles de la esquina superior-izquierda de su padre (Si no se especifica un elemento padre, entonces el padre seria la pantalla en si). Si asumimos una resolución de 1920x1200, El lado izquierdo empezaría con 0 pixeles y el lado derecho tendría 1920 pixeles, una posición X de 960 representaría el centro de la pantalla. Similarmente, si el lado superior de la pantalla empieza 0 pixeles y el lado inferior termina con 1920 pixeles, una posición Y de 20 seria 20 pixeles bajo el lado superior de la pantalla. El mismo principio se aplica al ancho y al alto. <i>Tu puedes usar <a href="../GuiGetScreenSize.html" title="GuiGetScreenSize">guiGetScreenSize</a> y un poco de matemáticas para calcular algunas posiciones absolutas.</i>
</p><p>Las diferencias entre usar valores relativos y absolutos es un poco simple; Una GUI creada con valores absolutos siempre tendrá el mismo tamaño y posición, mientras que una GUI creada usando valores relativos siempre sera un porcentaje del tamaño de su padre.
</p><p>El valor absoluto es generalmente mas fácil de mantener cuando se edita un código a mano, aunque tu opción del tipo depende de la situación para que lo estas usando.
</p><p>Para propósitos de esta introducción usaremos valores relativos. (Aunque recomiendo usar absolutos)
</p>
<h3><span id="A.C3.B1adiendo_los_componentes"></span><span class="mw-headline" id="Añadiendo_los_componentes">Añadiendo los componentes</span></h3>
<p>Ahora agregaremos las etiquetas de texto (Diciendo "Usuario:" y "Contraseña:", Cajas de edición (Para ingresar los datos) y un botón para ingresar.
</p><p>Para crear el botón usaremos <a href="../GuiCreateButton.html" title="GuiCreateButton">guiCreateButton</a>, y para crear las cajas de edición usaremos <a href="../GuiCreateEdit.html" title="GuiCreateEdit">guiCreateEdit</a>:
</p><p><b>Nota que estamos escribiendo mas codigo de nuestra existente función 'createLoginWindow'. Esto no es una nueva función y esta pensada a reemplazar la que tu ya tenias.</b> 
</p>
<pre class="prettyprint lang-lua">function createLoginWindow()
	local X = 0.375
	local Y = 0.375
	local Width = 0.25
	local Height = 0.25
	wdwLogin = guiCreateWindow(X, Y, Width, Height, "Porfavor Ingrese", true)
	
	-- definimos las coordenadas X,Y de nuestra primera etiqueta
	X = 0.0825
	Y = 0.2
	-- definimos el ancho y el alto de nuestra primera etiqueta
	Width = 0.25
	Height = 0.25
	-- Creamos la primera etiqueta, nota que el argumento final es 'wdwLogin' significando la ventana que creamos arriba es el padre de
	-- esta etiqueta (asique todos los valores de posición y tamaño son relativos a la posición de esa ventana)
	guiCreateLabel(X, Y, Width, Height, "Usuario", true, wdwLogin)
	-- alteramos el valor Y, para que la segunda etiqueta este un poco mas abajo de la primera
	Y = 0.5
	guiCreateLabel(X, Y, Width, Height, "Contraseña", true, wdwLogin)
	

	X = 0.415
	Y = 0.2
	Width = 0.5
	Height = 0.15
	edtUser = guiCreateEdit(X, Y, Width, Height, "", true, wdwLogin)
	Y = 0.5
	edtPass = guiCreateEdit(X, Y, Width, Height, "", true, wdwLogin)
	-- Ponemos el maximo de caracteres que se pueden escribir en las cajas a 50
	guiEditSetMaxLength(edtUser, 50)
	guiEditSetMaxLength(edtPass, 50)
	
	X = 0.415
	Y = 0.7
	Width = 0.25
	Height = 0.2
	btnLogin = guiCreateButton(X, Y, Width, Height, "Ingresar", true, wdwLogin)
	
	-- Hacer la ventana invisible
	guiSetVisible(wdwLogin, false)
end
</pre>
<p>Nota que todo componente GUI creado es un hijo de la ventana, esto se hace espeficicando el elemento padre (wdwLogin, en este caso) cuando se crea el componente.
</p><p>Esto es muy util porque no solo hace pensar que todos sus componentes estan unidos a la ventana y que se van a mover con ella, sino que ademas todo cambio hecho a la ventana padre seran aplicados arbol abajo a todos sus elementos hijos. Por ejemplo, ahora podemos esconder todos los elementos GUI que creamos con solo esconder la ventana:
</p>
<pre class="prettyprint lang-lua">guiSetVisible(wdwLogin, false) --esconde todos los elementos GUI que hicimos para poderlos mostrar al jugador en el momento apropiado
</pre>
<h3><span id="Uso_de_la_funci.C3.B3n_anterior"></span><span class="mw-headline" id="Uso_de_la_función_anterior">Uso de la función anterior</span></h3>
<p>La función createLoginWindow ha sido completada, pero no hará nada hasta procesarlo. Es recomendable hacer todo el GUI cuando el resource del cliente se inicie, ocultarlo, y mostrarle al jugador cuando sea necesario. Por lo tanto, vamos a escribir un "event handler" para "<a href="../OnClientResourceStart.html" title="OnClientResourceStart">onClientResourceStart</a>" para crear la ventana:
</p>
<pre class="prettyprint lang-lua">-- esto significa que se iniciará cuando el propio resource se inicie
addEventHandler("onClientResourceStart", getResourceRootElement(getThisResource()), 
	function ()
		createLoginWindow()
	end
)	
</pre>
<p>Como en la ventana han de registrarse, la ventana se mostrará cuando el jugador entre al juego. 
Para esto, se puede usar el mismo evento, "<a href="../OnClientResourceStart.html" title="OnClientResourceStart">onClientResourceStart</a>", con lo que podemos modificar el código anterior para mostrar la ventana:
</p><p><b>Tenga en cuenta que ahora estamos escribiendo más código para nuestro actual 'onClientResourceStart'.Este no es un nuevo evento, está destinado a reemplazar el qué ya tienes.</b> 
</p>
<pre class="prettyprint lang-lua">addEventHandler("onClientResourceStart", getResourceRootElement(getThisResource()), 
	function ()
		-- crear el registro con sus componentes dentro de la ventana
		createLoginWindow()

		-- emitir un mensaje de bienvenida al jugador
                outputChatBox("Welcome to My MTA:SA Server, please log in.")

		-- si la interfaz gráfica de usuario se creó correctamente, a continuación, mostrar la interfaz gráfica de usuario para el jugador
	        if (wdwLogin ~= nil) then
			guiSetVisible(wdwLogin, true)
		else
			-- si la interfaz gráfica no se ha creado correctamente, se lo dirá al jugador
			outputChatBox("An unexpected error has occurred and the log in GUI has not been created.")
	        end 

		-- mostrar el cursor al jugador ( para que pueda seleccionar y pulsar los botones )
	        showCursor(true)
		-- establecer el foco de entrada en la interfaz gráfica de usuario, permitiendo a los jugadores (por ejemplo) al pulsar 'T' sin que salga la apertura en el chat
	        guiSetInputEnabled(true)
	end
)	
</pre>
<p>Tenga en cuenta que tenemos un sencillo "control de seguridad" antes de hacer la ventana visible, por lo que en el caso improbable de que la ventana no se haya creado, es decir wdwLogin no es un elemento válido, no se obtiene un error y simplemente se informa al jugador de lo que ha sucedido .
En el siguiente paso, vamos a crear la funcionalidad del botón para el botón "Iniciar sesión".
</p>
<h2><span class="mw-headline" id="Scripteando_el_boton">Scripteando el boton</span></h2>
<p>Ahora que tenemos creado nuestro GUI and se lo hemos mostrado a un jugador, nesecitamos hacerlo funcionar.
</p>
<h3><span class="mw-headline" id="Detectando_el_click">Detectando el click</span></h3>
<p>Cuando un jugador clickea en alguna parte del GUI, el evento "<a href="../OnClientGUIClick.html" title="OnClientGUIClick">onClientGUIClick</a>" sera triggeado para el componente GUI que tu clickeaste. Esto nos permite detectar facilmente cualquier click en los elemento GUI que nosotros quisimos usar. 
Por ejemplo, podemos adjuntar el evento con el boton "btnLogin" para agarrar algun click en el:
</p>
<pre class="prettyprint lang-lua">-- adjunta el evento onClientGUIClick a btnLogin y activa la funcion 'clientSubmitLogin'.
addEventHandler("onClientGUIClick", btnLogin, clientSubmitLogin, false)
</pre>
<p><b>Que quede claro que el argumento final es pasado a "false". Esto indica que el evento solo se va a activar directamente en btnLogin, sino el evento se tiene que propagarse por todo los elementos. Ajusta esto a true mientras adjunta a los elementos GUI querra decir que algun click en cualquier elemento en el mismo se activara este evento.</b>
</p><p>Esta linea del codigo podra ahora ser añadida dentro de la funcion createLoginWindow. Esto es un error comun al intentar y adjuntar los eventos a algun elemento GUI inexistente, por lo tanto hacer que siempre el evento se adjunte <b>despues</b> the crear los elementos GUI (en este caso, el boton) ha sido creado:
</p><p><b>Nota que ahora estamos escribiendo mas codigo para la existencia de la funcion 'createLoginWindow'</b>
</p>
<pre class="prettyprint lang-lua">function createLoginWindow()
	-- crea todos los elementos GUI
	...

	-- Ahora añadimos nuevo evento onClientGUIClick al evento luego de ser creado.
	addEventHandler("onClientGUIClick", btnLogin, clientSubmitLogin, false)
</pre>
<h3><span class="mw-headline" id="Administrar_el_clic">Administrar el clic</span></h3>
<p>Ahora para detectar cuando le damos clic al boton, tenemos que escribir código para manejar lo que suceda cuando lo pulsen.
En nuestro controlador de evento <a href="../OnClientGUIClick.html" title="OnClientGUIClick">onClientGUIClick</a>, le dijimos que llamara a la función clientSubmitLogin cada vez que se hace clic en btnLogin. Por lo tanto, ahora podemos utilizar la función clientSubmitLogin para controlar lo que ocurre cuando se hace clic en el botón:
</p>
<pre class="prettyprint lang-lua">-- Crea la función y definir los parámetros 'Botón' y 'Estado'.
-- (éstos pasan automáticamente por OnClientClick)
function clientSubmitLogin(button,state)
	-- si nuestro botón "login" es clickeado con el botón izquierdo del ratón, y soltado el botón izquierdo.
	if button == "left" and state == "up" then
		-- move the input focus back onto the game (allowing players to move around, open the chatbox, etc)
		guiSetInputEnabled(false)
		-- esconde la ventana y todos sus componentes
		guiSetVisible(wdwLogin, false)
		-- esconde el cursor del ratón
		showCursor(false)
	end
end
</pre>
<p>Ahora, cuando al botón le den clic, la ventana se debera esconder y todos los controles volveran. Despues, deberemos decirle al servidor que permita spawnear al jugador.
</p>
<h3><span class="mw-headline" id="Triggering_el_server">Triggering el server</span></h3>
<p>La activación del server se puede hacer usando <a href="../TriggerServerEvent.html" title="TriggerServerEvent">triggerServerEvent</a>. Esto le permite activar un evento especificado en el servidor desde el cliente. El mismo se puede hacer a la inversa usando <a href="../TriggerClientEvent.html" title="TriggerClientEvent">triggerClientEvent</a>. Aquí, nosotros usamos la función <a href="../TriggerServerEvent.html" title="TriggerServerEvent">triggerServerEvent</a> para llamar a nuestro serverEvent personalizado, denominado "submitLogin", que a su vez controla el desove del jugador serverside.
</p><p><b>Tenga en cuenta que ahora estamos escribiendo más código para nuestra función 'clientSubmitLogin' existente. Esto no es una nueva función y está destinado a reemplazar lo que ya tienes. </b>
</p>
<pre class="prettyprint lang-lua">function clientSubmitLogin(button,state)
	if button == "left" and state == "up" then
		-- tomar el texto introducido en el campo 'username'
		local username = guiGetText(edtUser)
		-- tomar el texto introducido en el campo 'password'
		local password = guiGetText(edtPass)

		-- si el nombre de usuario y contraseña ambos existen
		if username and password then
			-- activar el server 'submitLogin' y pasar el nombre de usuario y contraseña a la misma.
			triggerServerEvent("submitLogin", getRootElement(), username, password)

			-- ocultar la gui, ocultar el cursor y devolver el control al player
			guiSetInputEnabled(false)
			guiSetVisible(wdwLogin, false)
			showCursor(false)
		else
			-- de otro modo, presentar un mensaje para el jugador, no activar el server
			-- y no ocultar la gui
			outputChatBox("Please enter a username and password.")
		end
	end
end
</pre>
<h3><span class="mw-headline" id="Crear_el_evento_serverside">Crear el evento serverside</span></h3>
<p>En este punto, ahora tenemos todo el código necesario en el clienteside, por lo que abrimos el archivo 'script.lua' serverside (desde el <a href="../Scripting_Introduction.html" title="Scripting Introduction">Introduction to Scripting</a>) u otro archivo serverside adecuado para trabajar.
</p><p>En el lado del servidor, recordamos que estamos spawneando al jugador tan pronto como se loguea.
Así que, en primer lugar, tendremos que definir el evento personalizado que se utilizó antes en el cliente. Esto se puede hacer usando <a href="../AddEvent.html" title="AddEvent">addEvent</a> y <a href="../AddEventHandler.html" title="AddEventHandler">AddEventHandler</a>.
</p>
<pre class="prettyprint lang-lua">-- create our loginHandler function, with username and password parameters (passed from the client gui)
function loginHandler(username,password)

end

-- define our custom event, and allow it to be triggered from the client ('true')
addEvent("submitLogin",true)
-- add an event handler so that when submitLogin is triggered, the function loginHandler is called
addEventHandler("submitLogin",root,loginHandler)
</pre>
<h3><span class="mw-headline" id="Logging_in">Logging in</span></h3>
<p>Ahora tenemos una función que es llama a través del evento personalizado 'submitLogin', podemos empezar a trabajar en el on logging y el spawning del jugador, haciendo uso de nuestra funcion 'loginHandler':
</p>
<pre class="prettyprint lang-lua">function loginHandler(username,password)
	-- compruebe que el nombre de usuario y la contraseña son correctos
	if username == "user" and password == "apple" then
		-- el jugador se ah logueado satisfactoriamente, asi que debe spawnearlo
		if (client) then
			spawnPlayer(client, 1959.55, -1714.46, 10)
			fadeCamera(client, true)
                        setCameraTarget(client, client)
			outputChatBox("Welcome to My Server.", client)
		end
	else
		-- si el nombre de usuario o contraseña no es correcta, enviar un mensaje al player
		outputChatBox("Invalid username and password. Please re-connect and try again.",client)
        end			
end

addEvent("submitLogin",true)
addEventHandler("submitLogin",root,loginHandler)
</pre>
<p><b>Para los fines de este tutorial, se muestra un sistema de nombre de usuario y una contraseña muy básico. Por una alternativa más completa, se puede utilizar el Sistema de cuentas o una base de datos MySQL.</b>
</p><p>También tenga en cuenta el uso dela variable  "client", es una variable interna que utiliza MTA para identificar al jugador que provocó el evento.
</p><p>Por último, no se olvide de incluir el nuevo archivo gui.lua en el meta.xml del recurso principal, y etiquetarlo como un script de cliente:
</p>
<pre class="prettyprint lang-xml">&lt;script src="client/gui.lua" type="client" /&gt;
</pre>
<p>En este punto, ahora tenemos una ventana de base de inicio de sesión que comprueba el nombre de usuario y la contraseña del jugador cuando se hace clic en el botón de inicio de sesión. Si son correctos, el jugador se spawneara de forma automática.
</p><p>Para obtener más ayuda con la GUI, consulte la <a href="../Category_GUI_Tutorials.html" title="Category:GUI Tutorials">GUI tutorials</a>.
</p>
<!-- 
NewPP limit report
Cached time: 20220727211851
Cache expiry: 86400
Reduced expiry: false
Complications: []
CPU time usage: 0.011 seconds
Real time usage: 0.012 seconds
Preprocessor visited node count: 109/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 6708/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wiki-wiki_dev_:pcache:idhash:5916-0!canonical and timestamp 20220727211851 and revision id 39272. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://wiki.multitheftauto.com/index.php?title=ES/Introducci%c3%b3n_a_la_Programaci%c3%b3n_de_GUI&amp;oldid=39272">https://wiki.multitheftauto.com/index.php?title=ES/Introducción_a_la_Programación_de_GUI&amp;oldid=39272</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../Category_GUI_Tutorials.html" title="Category:GUI Tutorials">GUI Tutorials</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<label id="p-personal-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-createaccount" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=Special:CreateAccount&amp;returnto=ES%2FIntroducci%C3%B3n+a+la+Programaci%C3%B3n+de+GUI" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=Special:UserLogin&amp;returnto=ES%2FIntroducci%C3%B3n+a+la+Programaci%C3%B3n+de+GUI" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu vector-menu-tabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<label id="p-namespaces-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Namespaces</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="Introducci%c3%b3n_a_la_Programaci%c3%b3n_de_GUI.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=Talk:ES/Introducci%C3%B3n_a_la_Programaci%C3%B3n_de_GUI&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox" aria-labelledby="p-variants-label" />
	<label id="p-variants-label" aria-label="Change language variant" class="vector-menu-heading">
		<span class="vector-menu-heading-label">English</span>
			<span class="vector-menu-checkbox-expanded">expanded</span>
			<span class="vector-menu-checkbox-collapsed">collapsed</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu vector-menu-tabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<label id="p-views-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Views</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="Introducci%c3%b3n_a_la_Programaci%c3%b3n_de_GUI.html"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=ES/Introducci%C3%B3n_a_la_Programaci%C3%B3n_de_GUI&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=ES/Introducci%C3%B3n_a_la_Programaci%C3%B3n_de_GUI&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options"
	 >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox" aria-labelledby="p-cactions-label" />
	<label id="p-cactions-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">More</span>
			<span class="vector-menu-checkbox-expanded">expanded</span>
			<span class="vector-menu-checkbox-collapsed">collapsed</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://wiki.multitheftauto.com/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search Multi Theft Auto: Wiki" aria-label="Search Multi Theft Auto: Wiki" autocapitalize="sentences" title="Search Multi Theft Auto: Wiki [f]" accesskey="f" id="searchInput"
				/>
				<input type="hidden" name="title" value="Special:Search"/>
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search" />
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go" />
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="../Main_Page.html"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<label id="p-navigation-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Navigation</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Home" class="mw-list-item"><a href="../Main_Page.html"><span>Home</span></a></li><li id="n-How-you-can-help" class="mw-list-item"><a href="../How_you_can_help.html"><span>How you can help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="../Special_RecentChanges.html" icon="recentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li><li id="n-randompage" class="mw-list-item"><a href="../DgsGridListSetItemSelectable.html" icon="die" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-Reference" class="mw-portlet mw-portlet-Reference vector-menu vector-menu-portal portal" aria-labelledby="p-Reference-label" role="navigation" 
	 >
	<label id="p-Reference-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Reference</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Client-Functions" class="mw-list-item"><a href="../Client_Scripting_Functions.html"><span>Client Functions</span></a></li><li id="n-Client-Events" class="mw-list-item"><a href="../Client_Scripting_Events.html"><span>Client Events</span></a></li><li id="n-Server-Functions" class="mw-list-item"><a href="../Server_Scripting_Functions.html"><span>Server Functions</span></a></li><li id="n-Server-Events" class="mw-list-item"><a href="../Server_Scripting_Events.html"><span>Server Events</span></a></li><li id="n-Shared-Functions" class="mw-list-item"><a href="../Shared_Scripting_Functions.html"><span>Shared Functions</span></a></li><li id="n-Useful-Functions" class="mw-list-item"><a href="../Useful_Functions.html"><span>Useful Functions</span></a></li><li id="n-MTA-Classes" class="mw-list-item"><a href="../MTA_Classes.html"><span>MTA Classes</span></a></li><li id="n-MTA-Elements" class="mw-list-item"><a href="../Element.html"><span>MTA Elements</span></a></li><li id="n-Element-Tree" class="mw-list-item"><a href="../Element_tree.html"><span>Element Tree</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<label id="p-tb-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">Tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="../Special_WhatLinksHere/ES/Introducci%c3%b3n_a_la_Programaci%c3%b3n_de_GUI.html" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="../Special_RecentChangesLinked/ES/Introducci%c3%b3n_a_la_Programaci%c3%b3n_de_GUI.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=ES/Introducci%C3%B3n_a_la_Programaci%C3%B3n_de_GUI&amp;oldid=39272" title="Permanent link to this revision of the page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://wiki.multitheftauto.com/index.php?title=ES/Introducci%C3%B3n_a_la_Programaci%C3%B3n_de_GUI&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-lang" class="mw-portlet mw-portlet-lang vector-menu vector-menu-portal portal" aria-labelledby="p-lang-label" role="navigation" 
	 >
	<label id="p-lang-label" aria-label="" class="vector-menu-heading">
		<span class="vector-menu-heading-label">In other languages</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li class="interlanguage-link interwiki-it mw-list-item"><a href="http://wiki.multitheftauto.com/index.php?title=IT/Introduzione_allo_scripting_della_GUI" title="Introduzione allo scripting della GUI – italiano" lang="it" hreflang="it" class="interlanguage-link-target"><span>Italiano</span></a></li><li class="interlanguage-link interwiki-ru mw-list-item"><a href="http://wiki.multitheftauto.com/index.php?title=RU/Introduction_to_Scripting_the_GUI" title="Introduction to Scripting the GUI – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li><li class="interlanguage-link interwiki-en mw-list-item"><a href="http://wiki.multitheftauto.com/index.php?title=Introduction_to_Scripting_the_GUI" title="Introduction to Scripting the GUI – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li></ul>
		
	</div>
</nav>

</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 7 April 2014, at 20:41.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/licenses/fdl-1.3.html">GNU Free Documentation License 1.3</a> unless otherwise noted.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="../Multi_Theft_Auto__Wiki_Privacy_policy.html" title="Multi Theft Auto: Wiki:Privacy policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../Multi_Theft_Auto__Wiki_About.html" title="Multi Theft Auto: Wiki:About">About Multi Theft Auto: Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="../Multi_Theft_Auto__Wiki_General_disclaimer.html" title="Multi Theft Auto: Wiki:General disclaimer">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/licenses/fdl-1.3.html"><img src="https://wiki.multitheftauto.com/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3" width="88" height="31" loading="lazy"/></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="https://wiki.multitheftauto.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script src="https://wiki.multitheftauto.com/extensions/_MTAThemeExtensions/main.js"></script><script src="https://wiki.multitheftauto.com/extensions/_MTAThemeExtensions/topmenu.js"></script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.011","walltime":"0.012","ppvisitednodes":{"value":109,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":6708,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20220727211851","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":60});});</script>
</body>
</html>